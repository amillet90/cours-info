<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>BDD</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <link rel="stylesheet" href="markdown-pandoc-amV3.css" />
  <link rel="icon" href="favicon.ico" />
  <title>BDD</title>
</head>
<body>
<h1 id="amélioration-du-code-réaliser-une-couche-modèle-dans-lapplication">amélioration du code : réaliser une couche “modèle” dans l’application</h1>
<p>Dans le dossier “models”, il faudrait placer tous les éléments de code qui interagissent avec la base de données.</p>
<p><br></p>
<p><strong>Principe du MVC</strong></p>
<p><img src="img/TP6_S3_tp1_img2_router.png" style="width:15cm" /></p>
<p>L’objectif est de compléter les fonctions dans les fichiers du dossier <strong>models</strong> et de supprimer tous les accès à la base de données dans les contrôleurs.</p>
<p><br></p>
<p>étapes :</p>
<ul>
<li>recopier les requêtes dans les <strong>models</strong></li>
<li>importer le <strong>model</strong> (voir les <strong>models</strong>) nécessaire dans chaque <strong>controller</strong></li>
<li>supprimer le code inutile dans chaque <strong>controller</strong></li>
</ul>
<figure>
<img src="img/tp6_img2.png" alt="exemple de code dans le premier contrôleur" style="width:15cm" /><figcaption>exemple de code dans le premier contrôleur</figcaption>
</figure>
<h1 id="validateurs">validateurs</h1>
<p>créer comme ci-dessous un dossier <strong>validator</strong>, créer 4 fichiers dans ce dossier : validator_adherent.py, validator_auteur.py, validator_oeuvre.py, validor_exemplaire.py</p>
<pre><code>.
├── app.py
├── connexion_db.py
├── controllers
│   ├── admin_adherent.py
│   ├── admin_auteur.py
│   ├── admin_emprunt.py
│   ├── admin_exemplaire.py
│   ├── admin_oeuvre.py
├── entity
│   ├── Auteur.py
│   ├── Oeuvre.py
│   └── Adherent.py
├── flask_run.sh
├── models
│   ├── dao_adherent.py
│   ├── dao_auteur.py
│   ├── dao_emprunt.py
│   ├── dao_exemplaire.py
│   └── dao_oeuvre.py
├── static
│   ├── ....
│   │   ├── css
│   │   │   ├── ....
│   │   ├── images
│   │   │   ├── dixBrevesRencontres.jpg
│   │   │   ├── laCiteDesRobots.jpg
│   │   │   ├── LaGuerreDesMondes.jpg
│   │   │   ├── leMiroirDuMort.jpeg
│   │   │   ├── leRetourDePoirot.jpg
│   │   │   ├── lesFleursDuMal.jpg
│   │   │   ├── lesMondesPerdus.jpg
│   │   │   ├── livre.jpg
│   │   │   ├── no_photo2.jpeg
│   │   │   ├── no_photo.jpeg
│   │   │   ├── paroles.jpg
│   │   │   └── unAmourDeSwann.jpeg
│   │   ├── img
│   │   │   ├── favicon.ico
│   │   │   └── slide2.jpg
│   │   ├── js
│   │   │   ├── bootstrap.js
│   │   │   ├── foundation
│   │   │   │   ├── ...
│   │   │   ├── foundation.min.js
│   │   └── robots.txt
│   ├── favicon2.ico
│   ├── ...
│   └── mes_styles.css
├── templates
│   └── admin
│       ├── adherent
│       │   ├── add_adherent.html
│       │   ├── edit_adherent.html
│       │   └── show_adherents.html
│       ├── auteur
│       │   ├── add_auteur.html
│       │   ├── edit_auteur.html
│       │   └── show_auteurs.html
│       ├── emprunt
│       │   ├── add_emprunts.html
│       │   ├── bilan_emprunt.html
│       │   ├── delete_all_emprunts.html
│       │   ├── return_emprunts.html
│       │   └── select_adherent_emprunts.html
│       ├── exemplaire
│       │   ├── add_exemplaire.html
│       │   ├── edit_exemplaire.html
│       │   └── show_exemplaires.html
│       ├── layout.html
│       ├── _menu.html
│       └── oeuvre
│           ├── add_oeuvre.html
│           ├── edit_oeuvre.html
│           └── show_oeuvre.html
└── validator
    ├── validator_adherent.py
    ├── validator_auteur.py
    ├── validator_oeuvre.py
    └── validor_exemplaire.py</code></pre>
<ul>
<li>déplacer le code des validateurs dans ces fichiers</li>
</ul>
<h1 id="validation-des-données">validation des données</h1>
<p>lors de la création d’un emprunt et lorsque l’on rend des livres (exemplaires) les dates sont au format <code>YYYY-MM-DD</code></p>
<p>Mettre ces dates au format <code>DD-MM-YYYY</code>, vérifier ces dates <strong>coté serveur</strong>, retourner un messages elles ne sont pas correctes.</p>
<p>Afficher ces dates au format <code>DD-MM-YYYY</code> dans l’interface pour emprunter et rendre des livres</p>
<h1 id="présentation-dun-orm">présentation d’un ORM</h1>
<p>Rôle d’un ORM</p>
<p><a href="https://fr.wikipedia.org/wiki/Mapping_objet-relationnel" class="uri">https://fr.wikipedia.org/wiki/Mapping_objet-relationnel</a></p>
<p><a href="https://sgbd.developpez.com/actu/261037/Faut-il-utiliser-les-ORM-ou-continuer-d-ecrire-simplement-des-requetes-SQL-Eli-Bendersky-donne-son-avis/" class="uri">https://sgbd.developpez.com/actu/261037/Faut-il-utiliser-les-ORM-ou-continuer-d-ecrire-simplement-des-requetes-SQL-Eli-Bendersky-donne-son-avis/</a></p>
<ul>
<li>créer un fichier <strong>demo_sqlalchemny_biblio.py</strong></li>
</ul>
<p>placer y le code suivant</p>
<pre><code>from flask import Flask
import datetime
from decimal import *
from flask_debugtoolbar import DebugToolbarExtension

# pip3 install mysqlclient  flask_sqlalchemy flask_debugtoolbar
#  DROP TABLE IF EXISTS  emprunt, exemplaire , oeuvre,auteur, adherent   ;
# DESCRIBE adherent; DESCRIBE auteur;DESCRIBE oeuvre;DESCRIBE exemplaire;DESCRIBE emprunt;

from flask_sqlalchemy import SQLAlchemy

app = Flask(__name__)
app.debug = True
app.config[&#39;SECRET_KEY&#39;] = &#39;&lt;replace with a secret key&gt;&#39;
# toolbar = DebugToolbarExtension(app)
# #
# app.config[&#39;SQLALCHEMY_DATABASE_URI&#39;] = &#39;sqlite:////tmp/test.db&#39;
# app.config[&#39;SQLALCHEMY_DATABASE_URI&#39;] = &#39;mysql+pymysql://username:password@localhost/db_name&#39;

app.config[&#39;SQLALCHEMY_DATABASE_URI&#39;] = &#39;mysql://votreLogin:votreMotDePasse@localhost/BDD_votreLogin_orm&#39;
app.config[&#39;SQLALCHEMY_TRACK_MODIFICATIONS&#39;] = True
#mysql --user=votreLogin  --password=votreMotDePasse --host=localhost --database=BDD_votreLogin_orm


db = SQLAlchemy(app)


class Auteur(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    nom = db.Column(db.String(255), nullable=False)
    prenom = db.Column(db.String(255), nullable=True)
    #oeuvres = db.relationship(&#39;Oeuvre&#39;, back_populates=&#39;auteur&#39;)
    def __init__(self, nom, prenom):                       ## __constructor
        self.nom = nom
        self.prenom = prenom
    def __repr__(self):                                         ## __toString
        return f&#39;&lt;Auteur {self.id} {self.nom} {self.prenom}&gt;&#39;



class Adherent(db.Model):
    #__tablename__ = nom_table_sql                  # changer le nom de la table
    id = db.Column(db.Integer, primary_key=True)    # primary keys are required by SQLAlchemy
    # id = db.Column(&#39;adherent_id&#39;, db.Integer, primary_key = True)  # changer le nom de la colonne SQL
    nom = db.Column(db.String(255), unique=True)
    adresse = db.Column(db.String(255), nullable=True)
    date_paiement = db.Column(db.Date)
    def __init__(self, nom, adresse, date_paiement):
        self.nom = nom
        self.adresse = adresse
        self.date_paiement = date_paiement
    def __repr__(self):
        return &#39;Adherent : %r %r %r %r &#39; % (self.id, self.nom, self.adresse, self.date_paiement)



db.engine.execute(&#39;&#39;&#39;
    DROP TABLE IF EXISTS  emprunt, exemplaire , oeuvre,auteur, adherent   ;
&#39;&#39;&#39;)

db.create_all()
auteurs =[{&#39;id&#39;: 1, &#39;nom&#39;: &#39;Christie&#39;, &#39;prenom&#39;: &#39;Agatha&#39;},
          {&#39;id&#39;: 2, &#39;nom&#39;: &#39;Chateaubriand&#39;, &#39;prenom&#39;: &#39;François-René&#39;},
          {&#39;id&#39;: 3, &#39;nom&#39;: &#39;Flaubert&#39;, &#39;prenom&#39;: &#39;Gustave&#39;},
          {&#39;id&#39;: 4, &#39;nom&#39;: &#39;Prévert&#39;, &#39;prenom&#39;: &#39;Jacques&#39;},
          {&#39;id&#39;: 5, &#39;nom&#39;: &#39;De La Fontaine&#39;, &#39;prenom&#39;: &#39;Jean&#39;},
          {&#39;id&#39;: 6, &#39;nom&#39;: &#39;Daudet&#39;, &#39;prenom&#39;: &#39;Alphonse&#39;},
          {&#39;id&#39;: 7, &#39;nom&#39;: &#39;Hugo&#39;, &#39;prenom&#39;: &#39;Victor&#39;},
          {&#39;id&#39;: 8, &#39;nom&#39;: &#39;Kessel&#39;, &#39;prenom&#39;: &#39;Joseph&#39;},
          {&#39;id&#39;: 9, &#39;nom&#39;: &#39;Duras&#39;, &#39;prenom&#39;: &#39;Marguerite&#39;},
          {&#39;id&#39;: 10, &#39;nom&#39;: &#39;Proust&#39;, &#39;prenom&#39;: &#39;Marcel&#39;},
          {&#39;id&#39;: 11, &#39;nom&#39;: &#39;Zola&#39;, &#39;prenom&#39;: &#39;Émile&#39;},
          {&#39;id&#39;: 12, &#39;nom&#39;: &#39;Highsmith&#39;, &#39;prenom&#39;: &#39;Patricia&#39;},
          {&#39;id&#39;: 13, &#39;nom&#39;: &#39;Kipling&#39;, &#39;prenom&#39;: &#39;Rudyard&#39;},
          {&#39;id&#39;: 14, &#39;nom&#39;: &#39;Azimov&#39;, &#39;prenom&#39;: &#39;Isaac&#39;},
          {&#39;id&#39;: 15, &#39;nom&#39;: &#39;Baudelaire&#39;, &#39;prenom&#39;: &#39;Charles&#39;},
          {&#39;id&#39;: 16, &#39;nom&#39;: &#39;Moliere&#39;, &#39;prenom&#39;: &#39;Jean-Baptiste Poquelin&#39;}]

for enr_auteur in auteurs:
    auteur = Auteur(enr_auteur[&#39;nom&#39;], enr_auteur[&#39;prenom&#39;])
    db.session.add(auteur)
    print(auteur)
db.session.commit()
res_auteurs = Auteur.query.all()
print(res_auteurs)

adherents = [{&#39;id&#39;: 1, &#39;nom&#39;: &#39;billot&#39;, &#39;adresse&#39;: &#39;Montbeliard&#39;, &#39;date_paiement&#39;: datetime.date(2021, 11, 3)},
             {&#39;id&#39;: 2, &#39;nom&#39;: &#39;lauvernay&#39;, &#39;adresse&#39;: &#39;sevenans&#39;, &#39;date_paiement&#39;: datetime.date(2021, 6, 13)},
             {&#39;id&#39;: 3, &#39;nom&#39;: &#39;axelrad&#39;, &#39;adresse&#39;: &#39;sevenans&#39;, &#39;date_paiement&#39;: datetime.date(2021, 1, 12)},
             {&#39;id&#39;: 4, &#39;nom&#39;: &#39;bedez&#39;, &#39;adresse&#39;: &#39;hericourt&#39;, &#39;date_paiement&#39;: datetime.date(2021, 4, 17)},
             {&#39;id&#39;: 5, &#39;nom&#39;: &#39;berger&#39;, &#39;adresse&#39;: &#39;les glacis&#39;, &#39;date_paiement&#39;: datetime.date(2013, 11, 3)},
             {&#39;id&#39;: 6, &#39;nom&#39;: &#39;cambot&#39;, &#39;adresse&#39;: &#39;sevenans&#39;, &#39;date_paiement&#39;: datetime.date(2021, 12, 15)},
             {&#39;id&#39;: 7, &#39;nom&#39;: &#39;bonilla&#39;, &#39;adresse&#39;: &#39;sochaux&#39;, &#39;date_paiement&#39;: datetime.date(2021, 2, 17)},
             {&#39;id&#39;: 8, &#39;nom&#39;: &#39;asproitis&#39;, &#39;adresse&#39;: &#39;grenoble&#39;, &#39;date_paiement&#39;: datetime.date(2021, 12, 4)},
             {&#39;id&#39;: 9, &#39;nom&#39;: &#39;pereira&#39;, &#39;adresse&#39;: &#39;danjoutin&#39;, &#39;date_paiement&#39;: datetime.date(2021, 11, 3)},
             {&#39;id&#39;: 10, &#39;nom&#39;: &#39;dupont&#39;, &#39;adresse&#39;: &#39;grenoble&#39;, &#39;date_paiement&#39;: datetime.date(2021, 3, 14)},
             {&#39;id&#39;: 11, &#39;nom&#39;: &#39;durant&#39;, &#39;adresse&#39;: &#39;belfort&#39;, &#39;date_paiement&#39;: datetime.date(2021, 12, 16)},
             {&#39;id&#39;: 12, &#39;nom&#39;: &#39;piton&#39;, &#39;adresse&#39;: &#39;belfort&#39;, &#39;date_paiement&#39;: datetime.date(2021, 11, 3)}]

for enr_adherent in adherents:
    adherent = Adherent(enr_adherent[&#39;nom&#39;], enr_adherent[&#39;adresse&#39;], enr_adherent[&#39;date_paiement&#39;])
    db.session.add(adherent)
    print(adherent)
db.session.commit()
res_adherents = Adherent.query.all()
print(res_adherents)

oeuvres = [{&#39;id&#39;: 1, &#39;titre&#39;: &#39;le retour de Poirot&#39;, &#39;date_parution&#39;: datetime.date(1960, 2, 12), &#39;photo&#39;: &#39;leRetourDePoirot.jpg&#39;, &#39;auteur_id&#39;: 1},
           {&#39;id&#39;: 2, &#39;titre&#39;: &#39;Poirot quitte la scène&#39;, &#39;date_parution&#39;: datetime.date(1975, 5, 1), &#39;photo&#39;: &#39;&#39;, &#39;auteur_id&#39;: 1},
           {&#39;id&#39;: 3, &#39;titre&#39;: &#39;dix brèves rencontres&#39;, &#39;date_parution&#39;: datetime.date(1982, 10, 1), &#39;photo&#39;: &#39;dixBrevesRencontres.jpg&#39;, &#39;auteur_id&#39;: 1},
           {&#39;id&#39;: 4, &#39;titre&#39;: &#39;le miroir de la mort&#39;, &#39;date_parution&#39;: datetime.date(1961, 1, 1), &#39;photo&#39;: &#39;leMiroirDuMort.jpeg&#39;, &#39;auteur_id&#39;: 1},
           {&#39;id&#39;: 6, &#39;titre&#39;: &#39;une créature de rêve&#39;, &#39;date_parution&#39;: datetime.date(1992, 2, 1), &#39;photo&#39;: &#39;&#39;, &#39;auteur_id&#39;: 12},
           {&#39;id&#39;: 7, &#39;titre&#39;: &quot;mémoire d&#39;outre-tombe&quot;, &#39;date_parution&#39;: datetime.date(1949, 1, 1), &#39;photo&#39;: &#39;&#39;, &#39;auteur_id&#39;: 2},
           {&#39;id&#39;: 8, &#39;titre&#39;: &#39;Madame de Bovary&#39;, &#39;date_parution&#39;: datetime.date(1956, 12, 15), &#39;photo&#39;: &#39;&#39;, &#39;auteur_id&#39;: 3},
           {&#39;id&#39;: 9, &#39;titre&#39;: &#39;un amour de swam&#39;, &#39;date_parution&#39;: datetime.date(2004, 6, 1), &#39;photo&#39;: &#39;unAmourDeSwann.jpeg&#39;, &#39;auteur_id&#39;: 9},
           {&#39;id&#39;: 10, &#39;titre&#39;: &#39;les femmes savantes&#39;, &#39;date_parution&#39;: datetime.date(1672, 3, 16), &#39;photo&#39;: &#39;&#39;, &#39;auteur_id&#39;: 16},
           {&#39;id&#39;: 11, &#39;titre&#39;: &#39;le misanthrope&#39;, &#39;date_parution&#39;: datetime.date(1666, 1, 1), &#39;photo&#39;: &#39;&#39;, &#39;auteur_id&#39;: 16},
           {&#39;id&#39;: 12, &#39;titre&#39;: &#39;Les fleurs du mal&#39;, &#39;date_parution&#39;: datetime.date(1957, 6, 25), &#39;photo&#39;: &#39;lesFleursDuMal.jpg&#39;, &#39;auteur_id&#39;: 15},
           {&#39;id&#39;: 13, &#39;titre&#39;: &#39;petits poèmes en prose&#39;, &#39;date_parution&#39;: datetime.date(1969, 1, 1), &#39;photo&#39;: &#39;15&#39;, &#39;auteur_id&#39;: None},
           {&#39;id&#39;: 14, &#39;titre&#39;: &#39;les mondes perdus&#39;, &#39;date_parution&#39;: datetime.date(1980, 5, 6), &#39;photo&#39;: &#39;lesMondesPerdus.jpg&#39;, &#39;auteur_id&#39;: 14},
           {&#39;id&#39;: 15, &#39;titre&#39;: &#39;La guerre des mondes&#39;, &#39;date_parution&#39;: datetime.date(1970, 3, 15), &#39;photo&#39;: &#39;&#39;, &#39;auteur_id&#39;: 14},
           {&#39;id&#39;: 16, &#39;titre&#39;: &#39;spectacles&#39;, &#39;date_parution&#39;: datetime.date(1948, 5, 12), &#39;photo&#39;: &#39;&#39;, &#39;auteur_id&#39;: 4},
           {&#39;id&#39;: 17, &#39;titre&#39;: &#39;Les fables&#39;, &#39;date_parution&#39;: datetime.date(1694, 1, 1), &#39;photo&#39;: &#39;&#39;, &#39;auteur_id&#39;: 5},
           {&#39;id&#39;: 18, &#39;titre&#39;: &quot;Le triomphe de l&#39;amour&quot;, &#39;date_parution&#39;: datetime.date(1980, 5, 6), &#39;photo&#39;: &#39;&#39;, &#39;auteur_id&#39;: 5},
           {&#39;id&#39;: 19, &#39;titre&#39;: &#39;le livre de la jungle&#39;, &#39;date_parution&#39;: datetime.date(1968, 12, 11), &#39;photo&#39;: &#39;&#39;, &#39;auteur_id&#39;: 13},
           {&#39;id&#39;: 20, &#39;titre&#39;: &#39;kim&#39;, &#39;date_parution&#39;: datetime.date(1901, 7, 1), &#39;photo&#39;: &#39;&#39;, &#39;auteur_id&#39;: 13},
           {&#39;id&#39;: 21, &#39;titre&#39;: &#39;le marin de Gibraltar&#39;, &#39;date_parution&#39;: datetime.date(1952, 7, 12), &#39;photo&#39;: &#39;&#39;, &#39;auteur_id&#39;: 9},
           {&#39;id&#39;: 22, &#39;titre&#39;: &#39;l’assommoir&#39;, &#39;date_parution&#39;: datetime.date(1976, 1, 1), &#39;photo&#39;: &#39;&#39;, &#39;auteur_id&#39;: 11},
           {&#39;id&#39;: 23, &#39;titre&#39;: &quot;j&#39;accuse&quot;, &#39;date_parution&#39;: datetime.date(1898, 1, 13), &#39;photo&#39;: &#39;&#39;, &#39;auteur_id&#39;: 11},
           {&#39;id&#39;: 24, &#39;titre&#39;: &#39;la terre&#39;, &#39;date_parution&#39;: datetime.date(1887, 1, 1), &#39;photo&#39;: &#39;&#39;, &#39;auteur_id&#39;: 11}]


exemplaires = [{&#39;id&#39;: 1, &#39;etat&#39;: &#39;BON&#39;, &#39;date_achat&#39;: datetime.date(2021, 8, 25), &#39;prix&#39;: Decimal(&#39;13.50&#39;), &#39;oeuvre_id&#39;: 1},
               {&#39;id&#39;: 2, &#39;etat&#39;: &#39;MOYEN&#39;, &#39;date_achat&#39;: datetime.date(2015, 9, 28), &#39;prix&#39;: Decimal(&#39;12.50&#39;), &#39;oeuvre_id&#39;: 1},
               {&#39;id&#39;: 3, &#39;etat&#39;: &#39;MOYEN&#39;, &#39;date_achat&#39;: datetime.date(2021, 5, 26), &#39;prix&#39;: Decimal(&#39;12.00&#39;), &#39;oeuvre_id&#39;: 1},
               {&#39;id&#39;: 4, &#39;etat&#39;: &#39;BON&#39;, &#39;date_achat&#39;: datetime.date(2015, 1, 11), &#39;prix&#39;: Decimal(&#39;10.00&#39;), &#39;oeuvre_id&#39;: 1},
               {&#39;id&#39;: 5, &#39;etat&#39;: &#39;MAUVAIS&#39;, &#39;date_achat&#39;: datetime.date(2020, 10, 29), &#39;prix&#39;: Decimal(&#39;13.00&#39;), &#39;oeuvre_id&#39;: 2},
               {&#39;id&#39;: 6, &#39;etat&#39;: &#39;NEUF&#39;, &#39;date_achat&#39;: datetime.date(2021, 10, 29), &#39;prix&#39;: Decimal(&#39;20.00&#39;), &#39;oeuvre_id&#39;: 2},
               {&#39;id&#39;: 7, &#39;etat&#39;: &#39;BON&#39;, &#39;date_achat&#39;: datetime.date(2020, 12, 27), &#39;prix&#39;: Decimal(&#39;7.00&#39;), &#39;oeuvre_id&#39;: 3},
               {&#39;id&#39;: 8, &#39;etat&#39;: &#39;MOYEN&#39;, &#39;date_achat&#39;: datetime.date(2020, 9, 25), &#39;prix&#39;: Decimal(&#39;13.00&#39;), &#39;oeuvre_id&#39;: 3},
               {&#39;id&#39;: 9, &#39;etat&#39;: &#39;NEUF&#39;, &#39;date_achat&#39;: datetime.date(2015, 12, 29), &#39;prix&#39;: Decimal(&#39;18.00&#39;), &#39;oeuvre_id&#39;: 4},
               {&#39;id&#39;: 10, &#39;etat&#39;: &#39;NEUF&#39;, &#39;date_achat&#39;: datetime.date(2015, 12, 29), &#39;prix&#39;: Decimal(&#39;21.00&#39;), &#39;oeuvre_id&#39;: 4},
               {&#39;id&#39;: 11, &#39;etat&#39;: &#39;BON&#39;, &#39;date_achat&#39;: datetime.date(2015, 4, 29), &#39;prix&#39;: Decimal(&#39;26.00&#39;), &#39;oeuvre_id&#39;: 4},
               {&#39;id&#39;: 12, &#39;etat&#39;: &#39;BON&#39;, &#39;date_achat&#39;: datetime.date(2021, 1, 24), &#39;prix&#39;: Decimal(&#39;22.00&#39;), &#39;oeuvre_id&#39;: 6},
               {&#39;id&#39;: 13, &#39;etat&#39;: &#39;BON&#39;, &#39;date_achat&#39;: datetime.date(2021, 1, 24), &#39;prix&#39;: Decimal(&#39;22.00&#39;), &#39;oeuvre_id&#39;: 6},
               {&#39;id&#39;: 14, &#39;etat&#39;: &#39;BON&#39;, &#39;date_achat&#39;: datetime.date(2021, 5, 1), &#39;prix&#39;: Decimal(&#39;28.00&#39;), &#39;oeuvre_id&#39;: 7},
               {&#39;id&#39;: 15, &#39;etat&#39;: &#39;MAUVAIS&#39;, &#39;date_achat&#39;: datetime.date(2021, 1, 26), &#39;prix&#39;: Decimal(&#39;28.00&#39;), &#39;oeuvre_id&#39;: 7},
               {&#39;id&#39;: 16, &#39;etat&#39;: &#39;BON&#39;, &#39;date_achat&#39;: datetime.date(2021, 1, 24), &#39;prix&#39;: Decimal(&#39;30.00&#39;), &#39;oeuvre_id&#39;: 8},
               {&#39;id&#39;: 17, &#39;etat&#39;: &#39;BON&#39;, &#39;date_achat&#39;: datetime.date(2021, 1, 23), &#39;prix&#39;: Decimal(&#39;32.00&#39;), &#39;oeuvre_id&#39;: 9},
               {&#39;id&#39;: 18, &#39;etat&#39;: &#39;MAUVAIS&#39;, &#39;date_achat&#39;: datetime.date(2015, 1, 29), &#39;prix&#39;: Decimal(&#39;17.00&#39;), &#39;oeuvre_id&#39;: 10},
               {&#39;id&#39;: 19, &#39;etat&#39;: &#39;BON&#39;, &#39;date_achat&#39;: datetime.date(2020, 10, 29), &#39;prix&#39;: Decimal(&#39;18.00&#39;), &#39;oeuvre_id&#39;: 10},
               {&#39;id&#39;: 20, &#39;etat&#39;: &#39;BON&#39;, &#39;date_achat&#39;: datetime.date(2020, 10, 29), &#39;prix&#39;: Decimal(&#39;18.00&#39;), &#39;oeuvre_id&#39;: 10},
               {&#39;id&#39;: 21, &#39;etat&#39;: &#39;BON&#39;, &#39;date_achat&#39;: datetime.date(2020, 10, 29), &#39;prix&#39;: Decimal(&#39;19.00&#39;), &#39;oeuvre_id&#39;: 10},
               {&#39;id&#39;: 22, &#39;etat&#39;: &#39;BON&#39;, &#39;date_achat&#39;: datetime.date(2021, 1, 26), &#39;prix&#39;: Decimal(&#39;20.00&#39;), &#39;oeuvre_id&#39;: 11},
               {&#39;id&#39;: 23, &#39;etat&#39;: &#39;BON&#39;, &#39;date_achat&#39;: datetime.date(2021, 10, 29), &#39;prix&#39;: Decimal(&#39;21.50&#39;), &#39;oeuvre_id&#39;: 12},
               {&#39;id&#39;: 24, &#39;etat&#39;: &#39;MAUVAIS&#39;, &#39;date_achat&#39;: datetime.date(2021, 1, 24), &#39;prix&#39;: Decimal(&#39;22.00&#39;), &#39;oeuvre_id&#39;: 13},
               {&#39;id&#39;: 25, &#39;etat&#39;: &#39;BON&#39;, &#39;date_achat&#39;: datetime.date(2015, 1, 28), &#39;prix&#39;: Decimal(&#39;22.00&#39;), &#39;oeuvre_id&#39;: 13},
               {&#39;id&#39;: 26, &#39;etat&#39;: &#39;MAUVAIS&#39;, &#39;date_achat&#39;: datetime.date(2021, 1, 23), &#39;prix&#39;: Decimal(&#39;26.00&#39;), &#39;oeuvre_id&#39;: 14},
               {&#39;id&#39;: 27, &#39;etat&#39;: &#39;MOYEN&#39;, &#39;date_achat&#39;: datetime.date(2015, 12, 26), &#39;prix&#39;: Decimal(&#39;13.00&#39;), &#39;oeuvre_id&#39;: 14},
               {&#39;id&#39;: 28, &#39;etat&#39;: &#39;BON&#39;, &#39;date_achat&#39;: datetime.date(2021, 2, 23), &#39;prix&#39;: Decimal(&#39;12.00&#39;), &#39;oeuvre_id&#39;: 15},
               {&#39;id&#39;: 29, &#39;etat&#39;: &#39;BON&#39;, &#39;date_achat&#39;: datetime.date(2021, 10, 29), &#39;prix&#39;: Decimal(&#39;15.00&#39;), &#39;oeuvre_id&#39;: 15},
               {&#39;id&#39;: 30, &#39;etat&#39;: &#39;MAUVAIS&#39;, &#39;date_achat&#39;: datetime.date(2021, 1, 26), &#39;prix&#39;: Decimal(&#39;32.00&#39;), &#39;oeuvre_id&#39;: 16},
               {&#39;id&#39;: 31, &#39;etat&#39;: &#39;BON&#39;, &#39;date_achat&#39;: datetime.date(2021, 1, 23), &#39;prix&#39;: Decimal(&#39;19.00&#39;), &#39;oeuvre_id&#39;: 17},
               {&#39;id&#39;: 32, &#39;etat&#39;: &#39;MAUVAIS&#39;, &#39;date_achat&#39;: datetime.date(2017, 10, 29), &#39;prix&#39;: Decimal(&#39;19.00&#39;), &#39;oeuvre_id&#39;: 17},
               {&#39;id&#39;: 33, &#39;etat&#39;: &#39;BON&#39;, &#39;date_achat&#39;: datetime.date(2020, 1, 23), &#39;prix&#39;: Decimal(&#39;20.00&#39;), &#39;oeuvre_id&#39;: 19},
               {&#39;id&#39;: 34, &#39;etat&#39;: &#39;BON&#39;, &#39;date_achat&#39;: datetime.date(2021, 1, 25), &#39;prix&#39;: Decimal(&#39;11.00&#39;), &#39;oeuvre_id&#39;: 19},
               {&#39;id&#39;: 35, &#39;etat&#39;: &#39;MAUVAIS&#39;, &#39;date_achat&#39;: datetime.date(2020, 10, 29), &#39;prix&#39;: Decimal(&#39;15.00&#39;), &#39;oeuvre_id&#39;: 19},
               {&#39;id&#39;: 36, &#39;etat&#39;: &#39;NEUF&#39;, &#39;date_achat&#39;: datetime.date(2021, 10, 29), &#39;prix&#39;: Decimal(&#39;18.00&#39;), &#39;oeuvre_id&#39;: 19},
               {&#39;id&#39;: 37, &#39;etat&#39;: &#39;BON&#39;, &#39;date_achat&#39;: datetime.date(2021, 1, 23), &#39;prix&#39;: Decimal(&#39;8.00&#39;), &#39;oeuvre_id&#39;: 19},
               {&#39;id&#39;: 38, &#39;etat&#39;: &#39;MAUVAIS&#39;, &#39;date_achat&#39;: datetime.date(2020, 9, 28), &#39;prix&#39;: Decimal(&#39;18.00&#39;), &#39;oeuvre_id&#39;: 20},
               {&#39;id&#39;: 39, &#39;etat&#39;: &#39;BON&#39;, &#39;date_achat&#39;: datetime.date(2020, 12, 26), &#39;prix&#39;: Decimal(&#39;18.00&#39;), &#39;oeuvre_id&#39;: 20},
               {&#39;id&#39;: 40, &#39;etat&#39;: &#39;BON&#39;, &#39;date_achat&#39;: datetime.date(2021, 1, 23), &#39;prix&#39;: Decimal(&#39;11.00&#39;), &#39;oeuvre_id&#39;: 20}]


emprunts = [{&#39;adherent_id&#39;: 6, &#39;exemplaire_id&#39;: 2, &#39;date_emprunt&#39;: datetime.date(2021, 9, 21), &#39;date_retour&#39;: datetime.date(2021, 9, 28)},
            {&#39;adherent_id&#39;: 7, &#39;exemplaire_id&#39;: 2, &#39;date_emprunt&#39;: datetime.date(2021, 10, 21), &#39;date_retour&#39;: datetime.date(2021, 10, 28)},
            {&#39;adherent_id&#39;: 8, &#39;exemplaire_id&#39;: 2, &#39;date_emprunt&#39;: datetime.date(2021, 11, 21), &#39;date_retour&#39;: datetime.date(2021, 11, 28)},
            {&#39;adherent_id&#39;: 3, &#39;exemplaire_id&#39;: 3, &#39;date_emprunt&#39;: datetime.date(2021, 9, 13), &#39;date_retour&#39;: None},
            {&#39;adherent_id&#39;: 2, &#39;exemplaire_id&#39;: 4, &#39;date_emprunt&#39;: datetime.date(2021, 12, 1), &#39;date_retour&#39;: None},
            {&#39;adherent_id&#39;: 2, &#39;exemplaire_id&#39;: 5, &#39;date_emprunt&#39;: datetime.date(2021, 8, 23), &#39;date_retour&#39;: datetime.date(2021, 9, 23)},
            {&#39;adherent_id&#39;: 2, &#39;exemplaire_id&#39;: 5, &#39;date_emprunt&#39;: datetime.date(2021, 12, 15), &#39;date_retour&#39;: None},
            {&#39;adherent_id&#39;: 3, &#39;exemplaire_id&#39;: 5, &#39;date_emprunt&#39;: datetime.date(2021, 7, 26), &#39;date_retour&#39;: datetime.date(2021, 8, 23)},
            {&#39;adherent_id&#39;: 3, &#39;exemplaire_id&#39;: 5, &#39;date_emprunt&#39;: datetime.date(2021, 11, 23), &#39;date_retour&#39;: datetime.date(2021, 12, 24)},
            {&#39;adherent_id&#39;: 4, &#39;exemplaire_id&#39;: 6, &#39;date_emprunt&#39;: datetime.date(2022, 1, 22), &#39;date_retour&#39;: datetime.date(2022, 1, 23)},
            {&#39;adherent_id&#39;: 4, &#39;exemplaire_id&#39;: 6, &#39;date_emprunt&#39;: datetime.date(2022, 1, 25), &#39;date_retour&#39;: None},
            {&#39;adherent_id&#39;: 3, &#39;exemplaire_id&#39;: 7, &#39;date_emprunt&#39;: datetime.date(2022, 2, 22), &#39;date_retour&#39;: datetime.date(2022, 3, 29)},
            {&#39;adherent_id&#39;: 2, &#39;exemplaire_id&#39;: 8, &#39;date_emprunt&#39;: datetime.date(2021, 12, 30), &#39;date_retour&#39;: None},
            {&#39;adherent_id&#39;: 3, &#39;exemplaire_id&#39;: 9, &#39;date_emprunt&#39;: datetime.date(2022, 1, 25), &#39;date_retour&#39;: None},
            {&#39;adherent_id&#39;: 8, &#39;exemplaire_id&#39;: 9, &#39;date_emprunt&#39;: datetime.date(2021, 7, 26), &#39;date_retour&#39;: datetime.date(2021, 9, 22)},
            {&#39;adherent_id&#39;: 3, &#39;exemplaire_id&#39;: 11, &#39;date_emprunt&#39;: datetime.date(2022, 1, 26), &#39;date_retour&#39;: datetime.date(2022, 2, 21)},
            {&#39;adherent_id&#39;: 3, &#39;exemplaire_id&#39;: 13, &#39;date_emprunt&#39;: datetime.date(2022, 1, 4), &#39;date_retour&#39;: None},
            {&#39;adherent_id&#39;: 6, &#39;exemplaire_id&#39;: 15, &#39;date_emprunt&#39;: datetime.date(2021, 9, 23), &#39;date_retour&#39;: datetime.date(2021, 9, 26)},
            {&#39;adherent_id&#39;: 2, &#39;exemplaire_id&#39;: 18, &#39;date_emprunt&#39;: datetime.date(2021, 9, 23), &#39;date_retour&#39;: datetime.date(2021, 10, 28)},
            {&#39;adherent_id&#39;: 2, &#39;exemplaire_id&#39;: 19, &#39;date_emprunt&#39;: datetime.date(2022, 2, 26), &#39;date_retour&#39;: None},
            {&#39;adherent_id&#39;: 4, &#39;exemplaire_id&#39;: 19, &#39;date_emprunt&#39;: datetime.date(2021, 9, 21), &#39;date_retour&#39;: None},
            {&#39;adherent_id&#39;: 4, &#39;exemplaire_id&#39;: 27, &#39;date_emprunt&#39;: datetime.date(2022, 2, 22), &#39;date_retour&#39;: None},
            {&#39;adherent_id&#39;: 3, &#39;exemplaire_id&#39;: 33, &#39;date_emprunt&#39;: datetime.date(2022, 1, 30), &#39;date_retour&#39;: None},
            {&#39;adherent_id&#39;: 4, &#39;exemplaire_id&#39;: 34, &#39;date_emprunt&#39;: datetime.date(2022, 1, 23), &#39;date_retour&#39;: datetime.date(2022, 2, 20)},
            {&#39;adherent_id&#39;: 2, &#39;exemplaire_id&#39;: 35, &#39;date_emprunt&#39;: datetime.date(2021, 7, 13), &#39;date_retour&#39;: datetime.date(2021, 9, 21)},
            {&#39;adherent_id&#39;: 2, &#39;exemplaire_id&#39;: 37, &#39;date_emprunt&#39;: datetime.date(2022, 2, 11), &#39;date_retour&#39;: None},
            {&#39;adherent_id&#39;: 7, &#39;exemplaire_id&#39;: 38, &#39;date_emprunt&#39;: datetime.date(2021, 7, 26), &#39;date_retour&#39;: datetime.date(2021, 10, 22)},
            {&#39;adherent_id&#39;: 2, &#39;exemplaire_id&#39;: 40, &#39;date_emprunt&#39;: datetime.date(2022, 1, 23), &#39;date_retour&#39;: datetime.date(2022, 2, 23)},
            {&#39;adherent_id&#39;: 3, &#39;exemplaire_id&#39;: 40, &#39;date_emprunt&#39;: datetime.date(2021, 11, 23), &#39;date_retour&#39;: datetime.date(2021, 12, 24)},
            {&#39;adherent_id&#39;: 5, &#39;exemplaire_id&#39;: 40, &#39;date_emprunt&#39;: datetime.date(2021, 7, 25), &#39;date_retour&#39;: datetime.date(2021, 9, 22)}]
</code></pre>
<p>En vous aidant des exemple dans le code ci-dessus</p>
<ul>
<li>compléter le code pour créer toutes les tables (il en manque 3) , ajouter et afficher le jeu de test : les enregistrements en utilisant les dictionnaires</li>
</ul>
<p><a href="https://github.com/amillet90/Flask_crud_v2" class="uri">https://github.com/amillet90/Flask_crud_v2</a></p>
<p><a href="https://github.com/amillet90/typeorm_exemple_s2" class="uri">https://github.com/amillet90/typeorm_exemple_s2</a></p>
</body>
</html>
