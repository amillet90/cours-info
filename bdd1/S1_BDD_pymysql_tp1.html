<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>BDD1</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="markdown-pandoc-amV4.css" />
  <link rel="icon" href="favicon.ico" />
  <title>BDD</title>
</head>
<body>
<h1 id="choix-du-driver">choix du driver</h1>
<p>Il existe plusieurs bibliothèques différentes pour exécuter du SQL à l’aide du langage python (au travers d’un connecteur). On procède de la même manière en <em>php</em>, en <em>javascript</em>, ou dans d’autres langages. La tendance est de passer par des <strong>ORMs</strong> mais c’est plus compliqué de première abord.</p>
<h2 id="recherche-en-fonction-du-sgbdr">recherche en fonction du SGBDR</h2>
<p><br> Le choix de la bibliothèque (driver) pour exécuter du SQL va dépendre du SGBDR</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>id_produit</strong></th>
<th><strong>nom</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">mysql</td>
<td>PyMySQL,MySQL/connector, MySQLdb</td>
</tr>
<tr class="even">
<td style="text-align: left;">postgreSQL</td>
<td><a href="https://www.postgresqltutorial.com/postgresql-python/connect/" target="_blanck">psycopg2</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Oracle</td>
<td><a href="https://www.oracletutorial.com/python-oracle/connecting-to-oracle-database-in-python/" target="_blanck">cx_Oracle</a></td>
</tr>
<tr class="even">
<td style="text-align: left;">SQL server (microsoft)</td>
<td><a href="https://docs.microsoft.com/fr-fr/sql/connect/python/python-driver-for-sql-server?view=sql-server-ver15" target="_blanck">pyodbc</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;">sqlite</td>
<td><a href="https://docs.python.org/fr/3/library/sqlite3.html" target="_blanck">sqlite3</a></td>
</tr>
<tr class="even">
<td style="text-align: left;">mongodb</td>
<td><a href="https://www.mongodb.com/languages/python" target="_blanck">pymongo</a></td>
</tr>
</tbody>
</table>
<h2 id="choix-du-driver-pilote-bibliothèque">choix du driver (pilote, bibliothèque)</h2>
<p><br> voici 2 liens : <a href="https://wiki.openstack.org/wiki/PyMySQL_evaluation#Drivers_Under_Consideration" target="_blanck">un comparatif des drivers</a>, <a href="https://stackoverflow.com/questions/43102442/whats-the-difference-between-mysqldb-mysqlclient-and-mysql-connector-python" target="_blanck">un petit article sur stackoverflow</a></p>
<p><br> Afin de connecter Python avec une base de données via un Driver (le connecteur), il existe des bibliothèques qui servent à interagir avec la base de données. Avec le SGBDR MySQL vous avez principalement le choix entre 3 drivers :</p>
<ul>
<li><a href="https://www.w3schools.com/python/python_mysql_insert.asp" target="_blanck">MySQL/connector for Python</a> <a href="https://dev.mysql.com/doc/connector-python/en/connector-python-example-cursor-transaction.html" target="_blanck">doc sur mysql</a> <a href="https://dev.mysql.com/doc/connector-python/en/connector-python-installation-binary.html" target="_blanck">installation</a> : bibliothèque propriétaire (ORACLE) qui se connecte à MySQL/ODBC</li>
<li><a href="https://mysqlclient.readthedocs.io/user_guide.html#introduction" target="_blanck">MySQLdb</a> : bibliothèque qui se connecte à MySQL à partir de Python, elle est écrite en langage C, elle est gratuite et le logiciel est “opensource”.</li>
<li><a href="https://github.com/PyMySQL/PyMySQL" target="_blanck">PyMySQL</a> : bibliothèque qui se connecte à MySQL à partir de Python, c’est une bibliothèque écrite en Python. L’objectif de PyMySQL est de remplacer MySQLdb</li>
</ul>
<figure>
<img src="img_flask/sql_python_img_1.png" style="width:23cm" alt="" /><figcaption>tableau du site <a href="https://wiki.openstack.org/" class="uri">https://wiki.openstack.org/</a></figcaption>
</figure>
<p>Ces bibliothèques se ressemblent beaucoup :</p>
<ul>
<li>installation</li>
<li>utilisation : nom des fonctions</li>
</ul>
<p><br></p>
<p><code>PyMySql</code> semble un très bon choix. <code>MySQL/connector</code> est propriétaire. Pour la suite des TPs, on utilisera <code>PyMySql</code> mais on comparera avec <code>MySQL/connector</code> et <code>PyMySql</code>.</p>
<p><br></p>
<p>Installation de <a href="https://pymysql.readthedocs.io/en/latest/user/installation.html" target="_blanck">pymysql</a></p>
<pre><code>pip  install PyMySQL</code></pre>
<p>PS : <a href="https://mariadb.com/resources/blog/how-to-connect-python-programs-to-mariadb" target="_blanck">mariadb possède aussi une bibliothèque</a> mais elle semble moins utilisée</p>
<h1 id="exemple-avec-pymysql">Exemple avec PyMySql</h1>
<ul>
<li><a href="https://pymysql.readthedocs.io/en/latest/user/examples.html" target="_blanck">exemple de la documentation</a></li>
</ul>
<figure>
<img src="img_flask/sql_python_flask_tp1_img_1.png" alt="" /><figcaption>documentation de pymysql</figcaption>
</figure>
<!--
```{.python}
import pymysql.cursors

# Connect to the database
connection = pymysql.connect(host='localhost',
                             user='user',
                             password='passwd',
                             database='db',
                             charset='utf8mb4',
                             cursorclass=pymysql.cursors.DictCursor)

with connection:
    with connection.cursor() as cursor:
        # Create a new record
        sql = "INSERT INTO `users` (`email`, `password`) VALUES (%s, %s)"
        cursor.execute(sql, ('webmaster@python.org', 'very-secret'))

    # connection is not autocommit by default. So you must commit to save
    # your changes.
    connection.commit()

    with connection.cursor() as cursor:
        # Read a single record
        sql = "SELECT `id`, `password` FROM `users` WHERE `email`=%s"
        cursor.execute(sql, ('webmaster@python.org',))
        result = cursor.fetchone()
        print(result)
```
-->
<p>exemple sur le site W3Schools : <a href="https://www.w3schools.com/python/python_mysql_insert.asp" target="_blanck">MySQL/connector for Python</a></p>
<p><br> copier/coller du site W3Schools</p>
<figure>
<img src="img_flask/sql_python_flask_tp1_img_2.png" alt="" /><figcaption>documentation de pymysql</figcaption>
</figure>
<!--
```
import mysql.connector

mydb = mysql.connector.connect(
  host="serveurmysql",
  user="votreLogin",
  password="votreMotDePasse",
  database="BDD_votreLogin"
)
```
-->
<p><br><br></p>
<p><a href="#creation-projet">Créer un projet sur Pycharm</a></p>
<p><br> Créer un fichier avec l’exemple ci-dessus , exemple de nom de fichier <strong>test1_pymysql.py</strong> <br> Remplacer la connexion avec celle de <em>pymysql</em></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="co">#! /usr/bin/python</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a><span class="co"># -*- coding:utf-8 -*-</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true"></a><span class="im">import</span> pymysql.cursors</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true"></a><span class="co"># mysql --user=votreLogin  --password=votreMotDePasse --host=serveurmysql --database=BDD_votreLogin</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true"></a>mydb <span class="op">=</span> pymysql.<span class="ex">connect</span>(    <span class="co">#pymysql.connect remplace mysql.connector</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true"></a>  host<span class="op">=</span><span class="st">&quot;serveurmysql&quot;</span>,   <span class="co">#localhost sur les machines perso.</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true"></a>  user<span class="op">=</span><span class="st">&quot;votreLogin&quot;</span>,</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true"></a>  password<span class="op">=</span><span class="st">&quot;votreMotDePasse&quot;</span>,</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true"></a>  database<span class="op">=</span><span class="st">&quot;BDD_votreLogin&quot;</span>,</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true"></a>  charset<span class="op">=</span><span class="st">&#39;utf8mb4&#39;</span>,                      <span class="co"># 2 attributs à ajouter</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true"></a>  cursorclass<span class="op">=</span>pymysql.cursors.DictCursor  <span class="co"># 2 attributs à ajouter</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true"></a>)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true"></a></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true"></a>mycursor <span class="op">=</span> mydb.cursor()</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true"></a></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true"></a>mycursor.execute(<span class="st">&quot;CREATE TABLE customers (id INT AUTO_INCREMENT PRIMARY KEY, name VARCHAR(255), address VARCHAR(255))&quot;</span>)</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true"></a></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true"></a></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true"></a></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true"></a>sql <span class="op">=</span> <span class="st">&quot;INSERT INTO customers (name, address) VALUES (</span><span class="sc">%s</span><span class="st">, </span><span class="sc">%s</span><span class="st">)&quot;</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true"></a>val <span class="op">=</span> (<span class="st">&quot;John&quot;</span>, <span class="st">&quot;Highway 21&quot;</span>)</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true"></a>mycursor.execute(sql, val)</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true"></a>mydb.commit()</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true"></a><span class="bu">print</span>(mycursor.rowcount, <span class="st">&quot;record inserted.&quot;</span>)</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true"></a></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true"></a></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true"></a>sql <span class="op">=</span> <span class="st">&quot;INSERT INTO customers (name, address) VALUES (</span><span class="sc">%s</span><span class="st">, </span><span class="sc">%s</span><span class="st">)&quot;</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true"></a>val <span class="op">=</span> [</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true"></a>  (<span class="st">&#39;Peter&#39;</span>, <span class="st">&#39;Lowstreet 4&#39;</span>),</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true"></a>  (<span class="st">&#39;Amy&#39;</span>, <span class="st">&#39;Apple st 652&#39;</span>),</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true"></a>  (<span class="st">&#39;Hannah&#39;</span>, <span class="st">&#39;Mountain 21&#39;</span>),</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true"></a>  (<span class="st">&#39;Michael&#39;</span>, <span class="st">&#39;Valley 345&#39;</span>),</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true"></a>  (<span class="st">&#39;Sandy&#39;</span>, <span class="st">&#39;Ocean blvd 2&#39;</span>),</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true"></a>  (<span class="st">&#39;Betty&#39;</span>, <span class="st">&#39;Green Grass 1&#39;</span>),</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true"></a>  (<span class="st">&#39;Richard&#39;</span>, <span class="st">&#39;Sky st 331&#39;</span>),</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true"></a>  (<span class="st">&#39;Susan&#39;</span>, <span class="st">&#39;One way 98&#39;</span>),</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true"></a>  (<span class="st">&#39;Vicky&#39;</span>, <span class="st">&#39;Yellow Garden 2&#39;</span>),</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true"></a>  (<span class="st">&#39;Ben&#39;</span>, <span class="st">&#39;Park Lane 38&#39;</span>),</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true"></a>  (<span class="st">&#39;William&#39;</span>, <span class="st">&#39;Central st 954&#39;</span>),</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true"></a>  (<span class="st">&#39;Chuck&#39;</span>, <span class="st">&#39;Main Road 989&#39;</span>),</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true"></a>  (<span class="st">&#39;Viola&#39;</span>, <span class="st">&#39;Sideway 1633&#39;</span>)</span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true"></a>]</span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true"></a>mycursor.executemany(sql, val)</span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true"></a>mydb.commit()</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true"></a><span class="bu">print</span>(mycursor.rowcount, <span class="st">&quot;was inserted.&quot;</span>)</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true"></a></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true"></a>mycursor.execute(<span class="st">&quot;SELECT * FROM customers&quot;</span>)</span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true"></a>myresult <span class="op">=</span> mycursor.fetchall()</span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true"></a><span class="cf">for</span> x <span class="kw">in</span> myresult:</span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true"></a>  <span class="bu">print</span>(x)</span></code></pre></div>
<ul>
<li>Tester l’exemple ci-dessus, exemple <code>python exercice1_pymysql.py</code></li>
</ul>
<p><br><br><br></p>
<h1 id="utilisation-dune-connexion">utilisation d’une connexion</h1>
<h2 id="quatre-étapes-pour-exécuter-une-requête">Quatre étapes pour exécuter une requête</h2>
<ul>
<li>Établir la connexion avec la base de données</li>
<li>Créer et exécuter des requêtes SQL</li>
<li>Récupérer le résultat</li>
<li>Fermer la connexion</li>
</ul>
<p><br> Fermer la connexion : opération très simple avec un simple script python, c’est un peu plus compliqué sur un <a href="https://flask.palletsprojects.com/en/2.0.x/patterns/sqlite3/" target="_blanck">serveur web</a>, il faut fermer la connexion à chaque requête HTTP, sinon le serveur risque d’avoir <a href="https://fr.wikipedia.org/wiki/Fuite_de_m%C3%A9moire" target="_blanck">des problèmes de fuite de mémoire</a>. <br></p>
<h3 id="se-connecter-à-la-base-de-données">Se connecter à la base de données</h3>
<p>Il faut créer un objet <strong>objet-connexion</strong> à l’aide de la fonction-fabrique <code>connect()</code>.</p>
<p><br></p>
<p>Cet objet assure l’interface entre votre programme et la base de données.</p>
<p><br></p>
<p>Après avoir importé une instance de l’objet bibliothèque (driver), il faut utiliser la méthode <code>.connect()</code> de la bibliothèque dans laquelle on passe plusieurs paramètres :</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="co">#! /usr/bin/python</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a><span class="co"># -*- coding:utf-8 -*-</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true"></a><span class="im">import</span> pymysql.cursors</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true"></a>mydb <span class="op">=</span> pymysql.<span class="ex">connect</span>(    <span class="co">#pymysql.connect remplace mysql.connector</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true"></a>  host<span class="op">=</span><span class="st">&quot;serveurmysql&quot;</span>   <span class="co">#localhost sur les machines perso.</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true"></a>  , user<span class="op">=</span><span class="st">&quot;votreLogin&quot;</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true"></a>  , password<span class="op">=</span><span class="st">&quot;votreMotDePasse&quot;</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true"></a>  , database<span class="op">=</span><span class="st">&quot;BDD_votreLogin&quot;</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true"></a>  <span class="co">#, port=3306         # sur mamp(mac) le port peut être 8889 ...</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true"></a>  , charset<span class="op">=</span><span class="st">&quot;utf8mb4&quot;</span>                       <span class="co"># 2 attributs à ajouter</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true"></a>  , cursorclass<span class="op">=</span>pymysql.cursors.DictCursor  <span class="co"># 2 attributs à ajouter</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true"></a>)</span></code></pre></div>
<p><br></p>
<ul>
<li>le nom de l’hôte (machine) sur lequel le serveur MySQL est installé (<strong>serveurmysql</strong> sur la machine de l’IUT, <strong>localhost</strong> ou <strong>127.0.0.1</strong> sur une machine personnelle)</li>
<li>le port TCP/IP utilisé par MySQL (par défaut <strong>3306</strong>). Attention avec un autre SGBDR, le port est différent.</li>
<li>le nom de la base de données MySQL (<strong>BDD_votreLogin</strong> sur la machine de l’IUT)</li>
<li>le nom d’utilisateur (<strong>votreLogin</strong> sur la machine de l’IUT)</li>
<li>le mot de passe (<strong>JJMM</strong> sur la machine de l’IUT)</li>
</ul>
<p><br></p>
<h3 id="créer-et-exécuter-des-requêtes-sql-type-de-requête">Créer et exécuter des requêtes SQL : Type de requête</h3>
<p>L’objectif est d’utiliser comme interface un navigateur Web. De fait une interface Web propose des interfaces avec en arrière plan des requêtes de type <strong>SELECT</strong>, <strong>INSERT</strong>, <strong>UPDATE</strong>, <strong>DELETE</strong></p>
<p><br> Il faut créer un <strong>curseur</strong> c’est un autre objet-interface. Il s’agit d’une sorte de tampon mémoire intermédiaire, destiné à mémoriser temporairement les données en cours de traitement, ainsi que les opérations que vous effectuez sur elles, avant leur transfert définitif dans la base de données. Cette technique permet donc d’annuler si nécessaire une ou plusieurs opérations qui se seraient révélées inadéquates, et de revenir en arrière dans le traitement, sans que la base de données n’en soit affectée.</p>
<p>Exécuter une requête en utilisant l’objet <code>connexion</code></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a>curseur <span class="op">=</span> connexion.cursor()</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a>curseur.execute(sql, tuple_parametres)</span></code></pre></div>
<p>Remarques</p>
<ul>
<li><p><code>connexion.commit()</code> est indispensable pour valider la requête de type <strong>INSERT</strong>, <strong>UPDATE</strong>, <strong>DELETE</strong></p></li>
<li><p>Pour annuler la requête, on peut utiliser <code>connexion.rollback()</code></p></li>
</ul>
<p><br><br></p>
<div class="cours">
<p><a href="https://docs.djangoproject.com/fr/3.2/topics/db/sql/#passing-parameters-into-raw" target="_blanck">Lors du passage de paramètres</a>, if faut faire <a href="https://en.wikipedia.org/wiki/SQL_injection" target="_blanck">attention aux injections</a></p>
<p><br></p>
<p>⚠️ =&gt; Ne jamais former une chaîne de texte avec la concaténation de texte (instruction SQL) et de paramètres de la requête HTTP (INPUT du formulaire par exemple)</p>
</div>
<h3 id="récupérer-le-résultat">récupérer le résultat</h3>
<p>Pour <strong>INSERT</strong>, <strong>UPDATE</strong>, <strong>DELETE</strong>, on récupère le même résultat que sur un terminal : <strong>le nombre d’enregistrements affectés</strong> par la requête. La méthode <em>rowcount</em> d’un curseur permet de connaître <strong>le nombre d’enregistrements affectés</strong> (utilisation : <code>mycursor.rowcount</code>).</p>
<p><br> Pour <strong>SELECT</strong>, on récupère :</p>
<ul>
<li>une <a href="https://www.w3schools.com/python/python_lists.asp" target="_blanck">liste</a> avec à l’intérieur des <a href="https://www.w3schools.com/python/python_dictionaries.asp" target="_blanck">dictionnaires</a>. Ces listes peuvent s’apparenter à un tableau à 2 dimensions : un tableau d’enregistrements</li>
<li>ou un enregistrement : <a href="https://www.w3schools.com/python/python_dictionaries.asp" target="_blanck">un dictionnaire</a></li>
</ul>
<h1 id="exercices-instructions-insert-update-delete">Exercices, instructions INSERT, UPDATE, DELETE</h1>
<div class="cours">
<ul>
<li>Pour exécuter une requête de type <strong>INSERT/UPDATE/DELETE</strong>
<ul>
<li>utiliser un curseur : <code>mycursor = mydb.cursor()</code></li>
<li>créer une chaîne de texte avec commande SQL en remplacant chaque paramètre par <code>%s</code></li>
<li>créer un tuple avec vos paramètres : <strong>ce tuple doit posséder le même nombre de paramètres que l’instruction SQL possède de <code>%s</code> </strong></li>
<li>exécuter <code>result=mycursor.execute(sql, tuple)</code></li>
<li>pour les instructions <strong>INSERT/UPDATE/DELETE</strong>, le résultat retourné par la commande est le nombre d’enregistrements affectés par la commande. (nombre d’enregistrements ajoutés/modifiés/supprimés)</li>
<li>Un tableau python <code>[]</code> peut remplacer un tuple python <code>()</code></li>
</ul></li>
<li>Avec un curseur les instructions ne sont pas <strong>persister</strong> (exécuter sur le disque dur). Il est nécessaire de valider ces instructions : faire un <code>commit</code> avec la connexion, exemple de commande : <code>mydb.commit()</code></li>
</ul>
</div>
<p><strong>script SQL pour les exercices</strong></p>
<p><br></p>
<p>Créer un fichier SQL avec la base (table article) du tp précédent</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a><span class="kw">DROP</span> <span class="kw">TABLE</span> <span class="cf">IF</span> <span class="kw">EXISTS</span> article;</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true"></a><span class="kw">DROP</span> <span class="kw">TABLE</span> <span class="cf">IF</span> <span class="kw">EXISTS</span> type_article;</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> type_article (</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true"></a>  <span class="kw">id</span> <span class="dt">int</span>(<span class="dv">11</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> AUTO_INCREMENT,</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true"></a>  libelle <span class="dt">varchar</span>(<span class="dv">50</span>),</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true"></a>  <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (<span class="kw">id</span>)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true"></a>  <span class="co">-- UNIQUE KEY libelle (libelle)</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true"></a>);</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> type_article <span class="kw">VALUES</span> (<span class="kw">NULL</span>,<span class="st">&#39;Fourniture de bureau&#39;</span>);</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> type_article <span class="kw">VALUES</span> (<span class="kw">NULL</span>,<span class="st">&#39;Mobilier&#39;</span>);</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> type_article <span class="kw">VALUES</span> (<span class="kw">NULL</span>,<span class="st">&#39;Mobilier Jardin&#39;</span>);</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> type_article <span class="kw">VALUES</span> (<span class="kw">NULL</span>,<span class="st">&#39;Arrosage&#39;</span>);</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> type_article <span class="kw">VALUES</span> (<span class="kw">NULL</span>,<span class="st">&#39;Outils&#39;</span>);</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> type_article <span class="kw">VALUES</span> (<span class="kw">NULL</span>,<span class="st">&#39;Divers&#39;</span>);</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true"></a></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> article (</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true"></a>  <span class="kw">id</span> <span class="dt">int</span>(<span class="dv">11</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> AUTO_INCREMENT,</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true"></a>  nom <span class="dt">varchar</span>(<span class="dv">50</span>),</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true"></a>  disponible tinyint(<span class="dv">1</span>) <span class="kw">DEFAULT</span> <span class="dv">0</span>,</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true"></a>  type_article_id <span class="dt">int</span>(<span class="dv">11</span>),</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true"></a>  prix <span class="dt">int</span>(<span class="dv">11</span>),</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true"></a>  stock <span class="dt">int</span>(<span class="dv">11</span>),</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true"></a>  description <span class="dt">varchar</span>(<span class="dv">500</span>),</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true"></a>  image <span class="dt">varchar</span>(<span class="dv">100</span>),  <span class="co">-- photo</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true"></a>  <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (<span class="kw">id</span>),</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true"></a>  <span class="co">-- UNIQUE KEY nom (nom),</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true"></a>  <span class="kw">CONSTRAINT</span> fk_article_type_article <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (type_article_id) <span class="kw">REFERENCES</span> type_article (<span class="kw">id</span>)</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true"></a>) ;</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true"></a></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> article(nom,disponible,prix,stock,type_article_id,image) <span class="kw">VALUES</span></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true"></a>(<span class="st">&#39;Enveloppes (50p)&#39;</span>,<span class="dv">1</span>,<span class="fl">2.00</span>, <span class="dv">3</span>,<span class="dv">1</span>,<span class="kw">NULL</span>),</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true"></a>(<span class="st">&#39;Stylo noir&#39;</span>,<span class="dv">1</span>,<span class="fl">1.00</span>,<span class="dv">13</span>,<span class="dv">1</span>,<span class="st">&#39;stylo.jpeg&#39;</span>),</span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true"></a>(<span class="st">&#39;Boite de rangement&#39;</span>,<span class="dv">1</span>,<span class="fl">3.00</span>,<span class="dv">12</span>,<span class="dv">1</span>,<span class="st">&#39;boites.jpeg&#39;</span>),</span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true"></a>(<span class="st">&#39;Chaise&#39;</span>,<span class="dv">1</span>,<span class="fl">40.00</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="st">&#39;chaise.jpeg&#39;</span>),</span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true"></a>(<span class="st">&#39;Tables&#39;</span>,<span class="dv">1</span>,<span class="fl">200.00</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="st">&#39;table.jpeg&#39;</span>),</span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true"></a>(<span class="st">&#39;Salon de Jardin alu&#39;</span>,<span class="dv">1</span>,<span class="fl">149.00</span>,<span class="dv">3</span>,<span class="dv">3</span>,<span class="st">&#39;salonJardin2.jpg&#39;</span>),</span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true"></a>(<span class="st">&#39;Table+6 fauteuils de Jardin&#39;</span>,<span class="dv">1</span>,<span class="fl">790.00</span>,<span class="dv">3</span>,<span class="dv">3</span>,<span class="st">&#39;tableFauteuilsJardin1.jpg&#39;</span>),</span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true"></a>(<span class="st">&#39;Set Table + 4 bancs&#39;</span>,<span class="dv">1</span>,<span class="fl">229.00</span>,<span class="dv">3</span>,<span class="dv">3</span>,<span class="st">&#39;setTableChaises.jpg&#39;</span>),</span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true"></a>(<span class="st">&#39;arrosoir bleu&#39;</span>,<span class="dv">1</span>,<span class="fl">13.50</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="st">&#39;arrosoir1.jpg&#39;</span>),</span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true"></a>(<span class="st">&#39;arrosoir griotte&#39;</span>,<span class="dv">1</span>,<span class="fl">9.90</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="st">&#39;arrosoir2.jpg&#39;</span>),</span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true"></a>(<span class="st">&#39;tuyau arrosage&#39;</span>,<span class="dv">1</span>,<span class="fl">31.90</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="st">&#39;tuyauArrosage1.jpg&#39;</span>),</span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true"></a>(<span class="st">&#39;tournevis&#39;</span>,<span class="dv">1</span>,<span class="fl">23.90</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="st">&#39;lotTourneVis.jpg&#39;</span>),</span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true"></a>(<span class="st">&#39;marteau menuisier&#39;</span>,<span class="dv">1</span>,<span class="fl">7.80</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="st">&#39;marteau.jpg&#39;</span>),</span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true"></a>(<span class="st">&#39;pince multiprise&#39;</span>,<span class="dv">1</span>,<span class="fl">21.80</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="st">&#39;pinceMultiprise.jpg&#39;</span>),</span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true"></a>(<span class="st">&#39;perceuse&#39;</span>,<span class="dv">1</span>,<span class="fl">149.80</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="st">&#39;perceuse.jpg&#39;</span>);</span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true"></a></span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> type_article;</span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> article;</span></code></pre></div>
<h2 id="exercice-1-demo-update">exercice 1 demo : update</h2>
<p>Tester une requête pour modifier le champ <strong>libelle</strong> par “Mobilier Intérieur” pour le type d’article ayant un identifiant égal à 2. Ces données sont dans des variables : <code>libelle</code>, <code>id_type_article</code>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true"></a><span class="co">#! /usr/bin/python</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true"></a><span class="co"># -*- coding:utf-8 -*-</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true"></a><span class="im">import</span> pymysql.cursors</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true"></a>mydb <span class="op">=</span> pymysql.<span class="ex">connect</span>(    <span class="co">#pymysql.connect remplace mysql.connector</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true"></a>  host<span class="op">=</span><span class="st">&quot;serveurmysql&quot;</span>,   <span class="co">#localhost sur les machines perso.</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true"></a>  user<span class="op">=</span><span class="st">&quot;votreLogin&quot;</span>,</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true"></a>  password<span class="op">=</span><span class="st">&quot;votreMotDePasse&quot;</span>,</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true"></a>  database<span class="op">=</span><span class="st">&quot;BDD_votreLogin&quot;</span>,</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true"></a>  charset<span class="op">=</span><span class="st">&#39;utf8mb4&#39;</span>,                      <span class="co"># 2 attributs à ajouter</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true"></a>  cursorclass<span class="op">=</span>pymysql.cursors.DictCursor  <span class="co"># 2 attributs à ajouter</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true"></a>)</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true"></a></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true"></a>mycursor <span class="op">=</span> mydb.cursor()</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true"></a></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true"></a>libelle<span class="op">=</span><span class="st">&quot;Mobilier Intérieur&quot;</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true"></a>id_type_article<span class="op">=</span><span class="dv">2</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true"></a>tuple_update <span class="op">=</span> (libelle,id_type_article)</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true"></a></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true"></a>sql <span class="op">=</span><span class="st">&quot;UPDATE type_article SET libelle =</span><span class="sc">%s</span><span class="st"> WHERE id &gt;= </span><span class="sc">%s</span><span class="st">;&quot;</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true"></a><span class="bu">print</span>(sql) </span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true"></a>mycursor.execute(sql, tuple_update)</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true"></a>mydb.commit()               <span class="co"># connection</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true"></a><span class="bu">print</span>(mycursor.rowcount, <span class="st">&quot;was updated.&quot;</span>)</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true"></a></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true"></a></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true"></a>mydb.close()</span></code></pre></div>
<p><br></p>
<h2 id="exercice-1-update">Exercice 1 : update</h2>
<ul>
<li><p>tester une requête pour modifier le nom, le prix, le stock, la photo pour l’article ayant l’identifiant 15. Ces données sont dans des variables : <code>nom</code>, <code>prix</code>, <code>stock</code> et <code>image</code> (par la suite on utilisera les données d’un formulaire HTML )</p></li>
<li><p>Après avoir créé une connexion sur la base de données, tester le code ci dessous :</p></li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true"></a>nom<span class="op">=</span><span class="st">&quot;perceuse visseuse&quot;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true"></a>prix<span class="op">=</span><span class="fl">139.9</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true"></a>stock<span class="op">=</span><span class="dv">5</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true"></a>id_article<span class="op">=</span><span class="dv">15</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true"></a>image<span class="op">=</span><span class="st">&quot;no_photo.jpeg&quot;</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true"></a>tuple_update <span class="op">=</span> (nom,prix,code_stock,image,id_article)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true"></a>sql <span class="op">=</span> <span class="st">&quot;ma_commande_SQL   =&gt; à modifié !&quot;</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true"></a><span class="bu">print</span>(sql) </span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true"></a>mycursor.execute(sql, tuple_update)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true"></a>mydb.commit()               <span class="co"># connection</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true"></a><span class="bu">print</span>(mycursor.rowcount, <span class="st">&quot;was updated.&quot;</span>)</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true"></a></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true"></a></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true"></a>mydb.close()</span></code></pre></div>
<p><br></p>
<ul>
<li>étape 1 : <strong>Dans un terminal</strong> : Tester une requête SQL qui exécute la requête ci dessus. Puis recharger le script <strong>SQL</strong> pour supprimer, créer la table <strong>article</strong> puis insérer tous les enregistrements.</li>
<li>étape 2 : <strong>Dans un fichier nouveau PYTHON</strong>, reprendre le code précédent, former un tuple avec les données utilisées dans la requête SQL, écrire une chaîne de texte qui correspond à votre requête SQL <strong>en utilisant le tuple des variables ci dessus</strong></li>
<li>étape 3 : <strong>Tester ce script PYTHON</strong></li>
<li>étape 4 : <strong>Dans un terminal</strong>, afficher tous les enregistrements de la table pour vérifier que le script <em>PYTHON</em> a bien fonctionné. (exemple : <code>SELECT id, nom, prix, stock, image, disponible, type_article_id FROM article;</code>)</li>
</ul>
<p><br></p>
<h2 id="exercice-2-demo-insert">Exercice 2 demo : insert</h2>
<p>Tester une requête pour ajouter un article de <strong>libelle</strong> “Jardinage”.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true"></a><span class="co">#! /usr/bin/python</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true"></a><span class="co"># -*- coding:utf-8 -*-</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true"></a><span class="im">import</span> pymysql.cursors</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true"></a>mydb <span class="op">=</span> pymysql.<span class="ex">connect</span>( </span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true"></a>  host<span class="op">=</span><span class="st">&quot;localhost&quot;</span>,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true"></a>  user<span class="op">=</span><span class="st">&quot;votreLogin&quot;</span>,</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true"></a>  password<span class="op">=</span><span class="st">&quot;votreMotDePasse&quot;</span>,</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true"></a>  database<span class="op">=</span><span class="st">&quot;BDD_votreLogin&quot;</span>,</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true"></a>  charset<span class="op">=</span><span class="st">&#39;utf8mb4&#39;</span>, </span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true"></a>  cursorclass<span class="op">=</span>pymysql.cursors.DictCursor </span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true"></a>)</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true"></a></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true"></a>mycursor <span class="op">=</span> mydb.cursor()</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true"></a></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true"></a>libelle<span class="op">=</span><span class="st">&quot;Jardinage&quot;</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true"></a></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true"></a>tuple_insert <span class="op">=</span> (libelle,)</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true"></a></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true"></a>sql <span class="op">=</span><span class="st">&quot;INSERT INTO type_article(libelle) VALUES (</span><span class="sc">%s</span><span class="st">);&quot;</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true"></a><span class="bu">print</span>(sql) </span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true"></a></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true"></a>mycursor.execute(sql, tuple_insert)</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true"></a>mydb.commit()               </span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true"></a><span class="bu">print</span>(<span class="st">&quot;Tuple ajouté avec succès dans la table article avec id = &quot;</span>, mycursor.lastrowid)</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true"></a></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true"></a></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true"></a>mydb.close()</span></code></pre></div>
<p><br></p>
<ul>
<li>étape 1 : <strong>Dans un terminal</strong>, tester une requête SQL qui exécute la requête ci dessus, puis afficher tous les enregistrements. Remettre tous les enregistrements à leurs valeurs initiales.</li>
<li>étape 2 : <strong>Dans un fichier nouveau PYTHON</strong>, reprendre le code précédent, former un tuple avec les données utilisées dans la requête SQL, écrire une chaîne de texte qui correspond à votre requête SQL <strong>en utilisant le tuple des variables ci dessus</strong></li>
<li>étape 3 : <strong>Tester ce script PYTHON</strong></li>
<li>étape 4 : <strong>Dans un terminal</strong>, afficher tous les enregistrements de la table pour vérifier que le script <em>PYTHON</em> a bien fonctionné. (exemple : <code>SELECT idEtudiant, nom, adresse, ville, code_postal, boursier FROM Etudiant;</code>)</li>
</ul>
<p><br></p>
<h2 id="exercice-2-insert">Exercice 2 : insert</h2>
<ul>
<li><p>tester une requête pour inserer un article avec le nom, le prix, le stock, la photo pour l’article ayant l’identifiant 15. Ces données sont dans des variables : <code>nom</code>, <code>prix</code>, <code>stock</code> et <code>image</code> (par la suite on utilisera les données d’un formulaire HTML )</p></li>
<li><p>Après avoir créé une connexion sur la base de données, tester le code ci dessous :</p></li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true"></a>nom<span class="op">=</span><span class="st">&quot;pelle&quot;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true"></a>prix<span class="op">=</span><span class="fl">25.5</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true"></a>stock<span class="op">=</span><span class="dv">7</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true"></a>disponible<span class="op">=</span><span class="dv">1</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true"></a>image<span class="op">=</span><span class="st">&quot;no_photo.jpeg&quot;</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true"></a>type_article_id<span class="op">=</span><span class="va">None</span>     <span class="co"># en python None remplace NULL en SQL dans un tuple</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true"></a>tuple_insert <span class="op">=</span> (nom,prix,stock,disponible,image,type_article_id)</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true"></a>sql <span class="op">=</span> <span class="st">&quot;ma_commande_SQL   =&gt; à modifié !&quot;</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true"></a><span class="bu">print</span>(sql) </span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true"></a></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true"></a>mycursor.execute(sql, tuple_insert)</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true"></a>mydb.commit()               </span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true"></a><span class="bu">print</span>(<span class="st">&quot;Tuple ajouté avec succès dans la table article avec id = &quot;</span>, mycursor.lastrowid)</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true"></a></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true"></a>mydb.close()</span></code></pre></div>
<p><br></p>
<ul>
<li>étape 1 : <strong>Dans un terminal</strong> : Tester une requête SQL qui exécute la requête ci dessus. Puis recharger le script <strong>SQL</strong> pour supprimer, créer la table <strong>article</strong> puis insérer tous les enregistrements.</li>
<li>étape 2 : <strong>Dans un fichier nouveau PYTHON</strong>, reprendre le code précédent, former un tuple avec les données utilisées dans la requête SQL, écrire une chaîne de texte qui correspond à votre requête SQL <strong>en utilisant le tuple des variables ci dessus</strong></li>
<li>étape 3 : <strong>Tester ce script PYTHON</strong></li>
<li>étape 4 : <strong>Dans un terminal</strong>, afficher tous les enregistrements de la table pour vérifier que le script <em>PYTHON</em> a bien fonctionné. (exemple : <code>SELECT id, nom, prix, stock, image, disponible, type_article_id FROM article;</code>)</li>
</ul>
<p><br></p>
<h2 id="exercice-3-demo-delete">Exercice 3 demo : DELETE</h2>
<p>Tester une requête pour supprimer le type d’article d’identifiant égal à 2.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true"></a><span class="co">#! /usr/bin/python</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true"></a><span class="co"># -*- coding:utf-8 -*-</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true"></a><span class="im">import</span> pymysql.cursors</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true"></a>mydb <span class="op">=</span> pymysql.<span class="ex">connect</span>(   </span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true"></a>  host<span class="op">=</span><span class="st">&quot;serveurmysql&quot;</span>,</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true"></a>  user<span class="op">=</span><span class="st">&quot;votreLogin&quot;</span>,</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true"></a>  password<span class="op">=</span><span class="st">&quot;votreMotDePasse&quot;</span>,</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true"></a>  database<span class="op">=</span><span class="st">&quot;BDD_votreLogin&quot;</span>,</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true"></a>  charset<span class="op">=</span><span class="st">&#39;utf8mb4&#39;</span>,   </span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true"></a>  cursorclass<span class="op">=</span>pymysql.cursors.DictCursor </span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true"></a>)</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true"></a></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true"></a>mycursor <span class="op">=</span> mydb.cursor()</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true"></a></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true"></a>id_type_article<span class="op">=</span><span class="dv">7</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true"></a>tuple_delete <span class="op">=</span> (id_type_article,)</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true"></a>sql <span class="op">=</span><span class="st">&quot;DELETE FROM type_article WHERE id = </span><span class="sc">%s</span><span class="st">;&quot;</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true"></a><span class="bu">print</span>(sql)</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true"></a>mycursor.execute(sql, tuple_delete)</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true"></a>mydb.commit()</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true"></a><span class="bu">print</span>(mycursor.rowcount, <span class="st">&quot; was delete.&quot;</span>)</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true"></a></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true"></a></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true"></a>mydb.close()</span></code></pre></div>
<h2 id="exercice-3-delete">exercice 3 : DELETE</h2>
<ul>
<li><p>tester une requête pour supprimer un article ayant l’identifiant 16.</p></li>
<li><p>Après avoir créé une connexion sur la base de données, tester le code ci dessous :</p></li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true"></a>id_article<span class="op">=</span><span class="dv">16</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true"></a>tuple_delete <span class="op">=</span> (id_article,)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true"></a>sql <span class="op">=</span> <span class="st">&quot;ma_commande_SQL   =&gt; à modifié !&quot;</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true"></a><span class="bu">print</span>(sql) </span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true"></a>mycursor.execute(sql, tuple_delete)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true"></a>mydb.commit()               </span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true"></a><span class="bu">print</span>(mycursor.rowcount, <span class="st">&quot; was delete.&quot;</span>)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true"></a></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true"></a>mydb.close()</span></code></pre></div>
<p><br></p>
<ul>
<li>étape 1 : <strong>Dans un terminal</strong> : Tester une requête SQL qui exécute la requête ci dessus. Puis recharger le script <strong>SQL</strong> pour supprimer, créer la table <strong>article</strong> puis insérer tous les enregistrements.</li>
<li>étape 2 : <strong>Dans un fichier nouveau PYTHON</strong>, reprendre le code précédent, former un tuple avec les données utilisées dans la requête SQL, écrire une chaîne de texte qui correspond à votre requête SQL <strong>en utilisant le tuple des variables ci dessus</strong></li>
<li>étape 3 : <strong>Tester ce script PYTHON</strong></li>
<li>étape 4 : <strong>Dans un terminal</strong>, afficher tous les enregistrements de la table pour vérifier que le script <em>PYTHON</em> a bien fonctionné. (exemple : <code>SELECT id, nom, prix, stock, image, disponible, type_article_id FROM article;</code>)</li>
</ul>
<p><br></p>
<h1 id="exercice-instructions-select">Exercice, instructions SELECT</h1>
<div class="cours">
<ul>
<li><p>executer une requête de type <strong>SELECT</strong> comme une requête de type <strong>INSERT/UPDATE/DELETE</strong></p></li>
<li><p>pour récupérer le résultat d’une requête SQL de type <strong>SELECT</strong>, utiliser la méthode <strong>fetchall</strong> ou <strong>fetchone</strong> .</p></li>
<li><p>Il n’est pas nécessaire de faire la commande <code>commit</code></p></li>
</ul>
</div>
<p>pour comprendre le fonctionnement des 2 méthodes (fonctions) <strong>fetchall</strong> ou <strong>fetchone</strong> voici un exemple :</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true"></a><span class="co">#! /usr/bin/python</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true"></a><span class="co"># -*- coding:utf-8 -*-</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true"></a><span class="im">import</span> pymysql.cursors</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true"></a>mydb <span class="op">=</span> pymysql.<span class="ex">connect</span>(    <span class="co">#pymysql.connect remplace mysql.connector</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true"></a>  host<span class="op">=</span><span class="st">&quot;localhost&quot;</span>,   <span class="co">#serveurmysql</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true"></a>  user<span class="op">=</span><span class="st">&quot;votreLogin&quot;</span>,</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true"></a>  password<span class="op">=</span><span class="st">&quot;votreMotDePasse&quot;</span>,</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true"></a>  database<span class="op">=</span><span class="st">&quot;BDD_votreLogin&quot;</span>,</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true"></a>  charset<span class="op">=</span><span class="st">&#39;utf8mb4&#39;</span>,                      <span class="co"># 2 attributs à ajouter</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true"></a>  cursorclass<span class="op">=</span>pymysql.cursors.DictCursor  <span class="co"># 2 attributs à ajouter</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true"></a>)</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true"></a></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true"></a>mycursor <span class="op">=</span> mydb.cursor()</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true"></a></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true"></a>id_article<span class="op">=</span><span class="st">&quot;9&quot;</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true"></a>int_id_article<span class="op">=</span><span class="bu">int</span>(id_article)</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true"></a>tuple_select <span class="op">=</span> (int_id_article,)</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true"></a></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true"></a>sql <span class="op">=</span><span class="st">&quot;SELECT id,nom,prix,stock FROM article WHERE id &lt;= </span><span class="sc">%s</span><span class="st"> ORDER BY id&quot;</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true"></a></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true"></a>mycursor.execute(sql, tuple_select)</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true"></a></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true"></a><span class="bu">print</span>(<span class="st">u&quot;</span><span class="ch">\n</span><span class="st">test fetchone </span><span class="ch">\n</span><span class="st">&quot;</span>)</span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true"></a>myresult <span class="op">=</span> mycursor.fetchone()</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true"></a><span class="bu">print</span>(myresult)</span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true"></a><span class="bu">print</span>(<span class="st">u&quot;</span><span class="ch">\n</span><span class="st">test 2 fetchone </span><span class="ch">\n</span><span class="st">&quot;</span>)</span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true"></a>myresult <span class="op">=</span> mycursor.fetchone()</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true"></a><span class="bu">print</span>(myresult)</span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true"></a></span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true"></a></span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true"></a><span class="bu">print</span>(<span class="st">u&quot;</span><span class="ch">\n</span><span class="st">test fetchall </span><span class="ch">\n</span><span class="st">&quot;</span>)</span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true"></a>myresult <span class="op">=</span> mycursor.fetchall()</span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true"></a><span class="cf">for</span> ligne <span class="kw">in</span> myresult:</span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true"></a>    <span class="bu">print</span>(ligne)</span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true"></a>    <span class="bu">print</span>(<span class="st">&quot;*** nom : &quot;</span>,ligne[<span class="st">&#39;nom&#39;</span>],<span class="st">&quot; , prix :&quot;</span>,ligne[<span class="st">&#39;prix&#39;</span>])</span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true"></a></span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true"></a><span class="bu">print</span>(<span class="st">u&quot;</span><span class="ch">\n</span><span class="st">test 2 fetchall </span><span class="ch">\n</span><span class="st">&quot;</span>)</span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true"></a></span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true"></a>mycursor.execute(sql, tuple_select)</span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true"></a></span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true"></a>myresult <span class="op">=</span> mycursor.fetchall()</span>
<span id="cb12-44"><a href="#cb12-44" aria-hidden="true"></a><span class="cf">for</span> ligne <span class="kw">in</span> myresult:</span>
<span id="cb12-45"><a href="#cb12-45" aria-hidden="true"></a>    <span class="bu">print</span>(ligne)</span>
<span id="cb12-46"><a href="#cb12-46" aria-hidden="true"></a>    <span class="bu">print</span>(<span class="st">&quot;*** nom : &quot;</span>,ligne[<span class="st">&#39;nom&#39;</span>],<span class="st">&quot; , prix :&quot;</span>,ligne[<span class="st">&#39;prix&#39;</span>])</span></code></pre></div>
<!--
  print(u"\ntest fetchmany \n")
myresult = mycursor.fetchmany(4)
print(myresult)
print(u"\naffichage 2 fetchmany \n")
for x in myresult:
    print(x)
-->
<p><a href="https://www.fatalerrors.org/a/python-beginners-notes-chapter-6-pymysql.html" class="uri">https://www.fatalerrors.org/a/python-beginners-notes-chapter-6-pymysql.html</a></p>
<h2 id="exercice-1">Exercice 1 :</h2>
<p>Ajouter une variable <code>id_type_article</code> de valeur 3 par exemple</p>
<p><br></p>
<p>Exécuter un script PYTHON qui affiche :</p>
<ul>
<li><p>tous les types d’articles</p></li>
<li><p>le type d’article d’identifiant avec pour identifiant <code>id_type_article</code></p></li>
</ul>
<p><br></p>
<h2 id="exercice-2">Exercice 2 :</h2>
<p>Ajouter une variable <code>id_article</code> de valeur 5 par exemple</p>
<p><br></p>
<p>Exécuter un script PYTHON qui affiche :</p>
<ul>
<li><p>tous les articles</p></li>
<li><p>l’article d’identifiant avec pour identifiant <code>id_article</code></p></li>
</ul>
<p><br></p>
<h1 id="annexes">annexes</h1>
<p>pour créer les tables et utiliser les tableaux <em>python</em> de données, il est possible d’utiliser le code ci-dessous :</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true"></a><span class="co">#! /usr/bin/python</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true"></a><span class="co"># -*- coding:utf-8 -*-</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true"></a><span class="im">import</span> pymysql.cursors</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true"></a>mydb <span class="op">=</span> pymysql.<span class="ex">connect</span>(    <span class="co">#pymysql.connect remplace mysql.connector</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true"></a>  host<span class="op">=</span><span class="st">&quot;localhost&quot;</span>,   <span class="co">#serveurmysql</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true"></a>  user<span class="op">=</span><span class="st">&quot;votreLogin&quot;</span>,</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true"></a>  password<span class="op">=</span><span class="st">&quot;votreMotDePasse&quot;</span>,</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true"></a>  database<span class="op">=</span><span class="st">&quot;BDD_votreLogin&quot;</span>,</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true"></a>  charset<span class="op">=</span><span class="st">&#39;utf8mb4&#39;</span>,                      <span class="co"># 2 attributs à ajouter</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true"></a>  cursorclass<span class="op">=</span>pymysql.cursors.DictCursor  <span class="co"># 2 attributs à ajouter</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true"></a>)</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true"></a>mycursor <span class="op">=</span> mydb.cursor()</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true"></a></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true"></a>sql<span class="op">=</span><span class="st">&#39;&#39;&#39;DROP TABLE IF EXISTS article;&#39;&#39;&#39;</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true"></a>mycursor.execute(sql)</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true"></a>sql<span class="op">=</span><span class="st">&#39;&#39;&#39;DROP TABLE IF EXISTS type_article;&#39;&#39;&#39;</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true"></a>mycursor.execute(sql)</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true"></a></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true"></a>sql<span class="op">=</span><span class="st">&#39;&#39;&#39;</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true"></a><span class="st">CREATE TABLE type_article (</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true"></a><span class="st">  id int(11) NOT NULL AUTO_INCREMENT,</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true"></a><span class="st">  libelle varchar(50),</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true"></a><span class="st">  PRIMARY KEY (id)</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true"></a><span class="st">  -- UNIQUE KEY libelle (libelle)</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true"></a><span class="st">);</span></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true"></a><span class="st">&#39;&#39;&#39;</span></span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true"></a>mycursor.execute(sql)</span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true"></a></span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true"></a>types_articles <span class="op">=</span> [</span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;libelle&#39;</span>: <span class="st">&#39;Fourniture de bureau&#39;</span>},</span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;libelle&#39;</span>: <span class="st">&#39;Mobilier&#39;</span>},</span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;libelle&#39;</span>: <span class="st">&#39;Mobilier Jardin&#39;</span>},</span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">4</span>, <span class="st">&#39;libelle&#39;</span>: <span class="st">&#39;Arrosage&#39;</span>},</span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">5</span>, <span class="st">&#39;libelle&#39;</span>: <span class="st">&#39;Outils&#39;</span>},</span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">6</span>, <span class="st">&#39;libelle&#39;</span>: <span class="st">&#39;Divers&#39;</span>}</span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true"></a>]</span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true"></a></span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true"></a><span class="cf">for</span> <span class="bu">type</span> <span class="kw">in</span> types_articles:</span>
<span id="cb13-41"><a href="#cb13-41" aria-hidden="true"></a>    <span class="bu">print</span>(<span class="bu">type</span>)</span>
<span id="cb13-42"><a href="#cb13-42" aria-hidden="true"></a>    tuple_type <span class="op">=</span> (<span class="bu">type</span>[<span class="st">&#39;libelle&#39;</span>])</span>
<span id="cb13-43"><a href="#cb13-43" aria-hidden="true"></a>    <span class="bu">print</span>(tuple_type)</span>
<span id="cb13-44"><a href="#cb13-44" aria-hidden="true"></a>    sql <span class="op">=</span> <span class="st">&quot;INSERT INTO type_article (libelle) VALUES (</span><span class="sc">%s</span><span class="st">)&quot;</span></span>
<span id="cb13-45"><a href="#cb13-45" aria-hidden="true"></a>    mycursor.execute(sql, tuple_type)</span>
<span id="cb13-46"><a href="#cb13-46" aria-hidden="true"></a></span>
<span id="cb13-47"><a href="#cb13-47" aria-hidden="true"></a>mydb.commit()</span>
<span id="cb13-48"><a href="#cb13-48" aria-hidden="true"></a></span>
<span id="cb13-49"><a href="#cb13-49" aria-hidden="true"></a>sql<span class="op">=</span><span class="st">&#39;&#39;&#39;</span></span>
<span id="cb13-50"><a href="#cb13-50" aria-hidden="true"></a><span class="st">CREATE TABLE article (</span></span>
<span id="cb13-51"><a href="#cb13-51" aria-hidden="true"></a><span class="st">  id int(11) NOT NULL AUTO_INCREMENT,</span></span>
<span id="cb13-52"><a href="#cb13-52" aria-hidden="true"></a><span class="st">  nom varchar(50),</span></span>
<span id="cb13-53"><a href="#cb13-53" aria-hidden="true"></a><span class="st">  disponible tinyint(1) DEFAULT 0,</span></span>
<span id="cb13-54"><a href="#cb13-54" aria-hidden="true"></a><span class="st">  type_article_id int(11),</span></span>
<span id="cb13-55"><a href="#cb13-55" aria-hidden="true"></a><span class="st">  prix int(11),</span></span>
<span id="cb13-56"><a href="#cb13-56" aria-hidden="true"></a><span class="st">  stock int(11),</span></span>
<span id="cb13-57"><a href="#cb13-57" aria-hidden="true"></a><span class="st">  description varchar(500),</span></span>
<span id="cb13-58"><a href="#cb13-58" aria-hidden="true"></a><span class="st">  image varchar(100),  -- photo</span></span>
<span id="cb13-59"><a href="#cb13-59" aria-hidden="true"></a><span class="st">  PRIMARY KEY (id),</span></span>
<span id="cb13-60"><a href="#cb13-60" aria-hidden="true"></a><span class="st">  -- UNIQUE KEY nom (nom),</span></span>
<span id="cb13-61"><a href="#cb13-61" aria-hidden="true"></a><span class="st">  CONSTRAINT fk_article_type_article FOREIGN KEY (type_article_id) REFERENCES type_article (id)</span></span>
<span id="cb13-62"><a href="#cb13-62" aria-hidden="true"></a><span class="st">);</span></span>
<span id="cb13-63"><a href="#cb13-63" aria-hidden="true"></a><span class="st">&#39;&#39;&#39;</span></span>
<span id="cb13-64"><a href="#cb13-64" aria-hidden="true"></a>mycursor.execute(sql)</span>
<span id="cb13-65"><a href="#cb13-65" aria-hidden="true"></a></span>
<span id="cb13-66"><a href="#cb13-66" aria-hidden="true"></a>articles <span class="op">=</span> [</span>
<span id="cb13-67"><a href="#cb13-67" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;nom&#39;</span>: <span class="st">&#39;Enveloppes (50p)&#39;</span>, <span class="st">&#39;type_article_id&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;prix&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;stock&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;description&#39;</span>: <span class="va">None</span>, <span class="st">&#39;image&#39;</span>: <span class="va">None</span>},</span>
<span id="cb13-68"><a href="#cb13-68" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;nom&#39;</span>: <span class="st">&#39;Stylo noir&#39;</span>, <span class="st">&#39;type_article_id&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;prix&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;stock&#39;</span>: <span class="dv">10</span>, <span class="st">&#39;description&#39;</span>: <span class="va">None</span>, <span class="st">&#39;image&#39;</span>: <span class="st">&#39;stylo.jpeg&#39;</span>, <span class="st">&#39;nb_avis&#39;</span>: <span class="dv">4</span>},</span>
<span id="cb13-69"><a href="#cb13-69" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;nom&#39;</span>: <span class="st">&#39;Boite de rangement&#39;</span>, <span class="st">&#39;type_article_id&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;prix&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;stock&#39;</span>: <span class="dv">7</span>, <span class="st">&#39;description&#39;</span>: <span class="va">None</span>, <span class="st">&#39;image&#39;</span>: <span class="st">&#39;boites.jpeg&#39;</span>},</span>
<span id="cb13-70"><a href="#cb13-70" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">4</span>, <span class="st">&#39;nom&#39;</span>: <span class="st">&#39;Chaise&#39;</span>, <span class="st">&#39;type_article_id&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;prix&#39;</span>: <span class="dv">40</span>, <span class="st">&#39;stock&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;description&#39;</span>: <span class="va">None</span>, <span class="st">&#39;image&#39;</span>: <span class="st">&#39;chaise.jpeg&#39;</span>},</span>
<span id="cb13-71"><a href="#cb13-71" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">5</span>, <span class="st">&#39;nom&#39;</span>: <span class="st">&#39;Tables&#39;</span>, <span class="st">&#39;type_article_id&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;prix&#39;</span>: <span class="dv">200</span>, <span class="st">&#39;stock&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;description&#39;</span>: <span class="va">None</span>, <span class="st">&#39;image&#39;</span>: <span class="st">&#39;table.jpeg&#39;</span>},</span>
<span id="cb13-72"><a href="#cb13-72" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">6</span>, <span class="st">&#39;nom&#39;</span>: <span class="st">&#39;Salon de Jardin alu&#39;</span>, <span class="st">&#39;type_article_id&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;prix&#39;</span>: <span class="dv">149</span>, <span class="st">&#39;stock&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;description&#39;</span>: <span class="va">None</span>, <span class="st">&#39;image&#39;</span>: <span class="st">&#39;salonJardin2.jpg&#39;</span>},</span>
<span id="cb13-73"><a href="#cb13-73" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">7</span>, <span class="st">&#39;nom&#39;</span>: <span class="st">&#39;Table+6 fauteuilles de Jardin&#39;</span>, <span class="st">&#39;type_article_id&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;prix&#39;</span>: <span class="dv">790</span>, <span class="st">&#39;stock&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;description&#39;</span>: <span class="va">None</span>, <span class="st">&#39;image&#39;</span>: <span class="st">&#39;tableFauteuilsJardin1.jpg&#39;</span>},</span>
<span id="cb13-74"><a href="#cb13-74" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">8</span>, <span class="st">&#39;nom&#39;</span>: <span class="st">&#39;Set Table + 4 bancs&#39;</span>, <span class="st">&#39;type_article_id&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;prix&#39;</span>: <span class="dv">229</span>, <span class="st">&#39;stock&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;description&#39;</span>: <span class="va">None</span>, <span class="st">&#39;image&#39;</span>: <span class="st">&#39;setTableChaises.jpg&#39;</span>},</span>
<span id="cb13-75"><a href="#cb13-75" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">9</span>, <span class="st">&#39;nom&#39;</span>: <span class="st">&#39;arrosoir bleu&#39;</span>, <span class="st">&#39;type_article_id&#39;</span>: <span class="dv">4</span>, <span class="st">&#39;prix&#39;</span>: <span class="dv">14</span>, <span class="st">&#39;stock&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;description&#39;</span>: <span class="va">None</span>, <span class="st">&#39;image&#39;</span>: <span class="st">&#39;arrosoir1.jpg&#39;</span>},</span>
<span id="cb13-76"><a href="#cb13-76" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">10</span>, <span class="st">&#39;nom&#39;</span>: <span class="st">&#39;arrosoir griotte&#39;</span>, <span class="st">&#39;type_article_id&#39;</span>: <span class="dv">4</span>, <span class="st">&#39;prix&#39;</span>: <span class="dv">10</span>, <span class="st">&#39;stock&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;description&#39;</span>: <span class="va">None</span>, <span class="st">&#39;image&#39;</span>: <span class="st">&#39;arrosoir2.jpg&#39;</span>},</span>
<span id="cb13-77"><a href="#cb13-77" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">11</span>, <span class="st">&#39;nom&#39;</span>: <span class="st">&#39;tuyau arrosage&#39;</span>, <span class="st">&#39;type_article_id&#39;</span>: <span class="dv">4</span>, <span class="st">&#39;prix&#39;</span>: <span class="dv">32</span>, <span class="st">&#39;stock&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;description&#39;</span>: <span class="va">None</span>, <span class="st">&#39;image&#39;</span>: <span class="st">&#39;tuyauArrosage1.jpg&#39;</span>},</span>
<span id="cb13-78"><a href="#cb13-78" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">12</span>, <span class="st">&#39;nom&#39;</span>: <span class="st">&#39;tournevis&#39;</span>, <span class="st">&#39;type_article_id&#39;</span>: <span class="dv">5</span>, <span class="st">&#39;prix&#39;</span>: <span class="dv">24</span>, <span class="st">&#39;stock&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;description&#39;</span>: <span class="va">None</span>, <span class="st">&#39;image&#39;</span>: <span class="st">&#39;lotTourneVis.jpg&#39;</span>},</span>
<span id="cb13-79"><a href="#cb13-79" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">13</span>, <span class="st">&#39;nom&#39;</span>: <span class="st">&#39;marteau menuisier&#39;</span>, <span class="st">&#39;type_article_id&#39;</span>: <span class="dv">5</span>, <span class="st">&#39;prix&#39;</span>: <span class="dv">8</span>, <span class="st">&#39;stock&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;description&#39;</span>: <span class="va">None</span>, <span class="st">&#39;image&#39;</span>: <span class="st">&#39;marteau.jpg&#39;</span>},</span>
<span id="cb13-80"><a href="#cb13-80" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">14</span>, <span class="st">&#39;nom&#39;</span>: <span class="st">&#39;pince multiprise&#39;</span>, <span class="st">&#39;type_article_id&#39;</span>: <span class="dv">5</span>, <span class="st">&#39;prix&#39;</span>: <span class="dv">22</span>, <span class="st">&#39;stock&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;description&#39;</span>: <span class="va">None</span>, <span class="st">&#39;image&#39;</span>: <span class="st">&#39;pinceMultiprise.jpg&#39;</span>},</span>
<span id="cb13-81"><a href="#cb13-81" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">15</span>, <span class="st">&#39;nom&#39;</span>: <span class="st">&#39;perceuse&#39;</span>, <span class="st">&#39;type_article_id&#39;</span>: <span class="dv">5</span>, <span class="st">&#39;prix&#39;</span>: <span class="dv">150</span>, <span class="st">&#39;stock&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;description&#39;</span>: <span class="va">None</span>, <span class="st">&#39;image&#39;</span>: <span class="st">&#39;perceuse.jpg&#39;</span>}</span>
<span id="cb13-82"><a href="#cb13-82" aria-hidden="true"></a>]</span>
<span id="cb13-83"><a href="#cb13-83" aria-hidden="true"></a></span>
<span id="cb13-84"><a href="#cb13-84" aria-hidden="true"></a></span>
<span id="cb13-85"><a href="#cb13-85" aria-hidden="true"></a><span class="cf">for</span> article <span class="kw">in</span> articles:</span>
<span id="cb13-86"><a href="#cb13-86" aria-hidden="true"></a>    <span class="bu">print</span>(article)</span>
<span id="cb13-87"><a href="#cb13-87" aria-hidden="true"></a>    tuple_article <span class="op">=</span> (article[<span class="st">&#39;nom&#39;</span>], article[<span class="st">&#39;type_article_id&#39;</span>], article[<span class="st">&#39;prix&#39;</span>], article[<span class="st">&#39;stock&#39;</span>], article[<span class="st">&#39;description&#39;</span>], article[<span class="st">&#39;image&#39;</span>])</span>
<span id="cb13-88"><a href="#cb13-88" aria-hidden="true"></a>    <span class="bu">print</span>(tuple_article)</span>
<span id="cb13-89"><a href="#cb13-89" aria-hidden="true"></a>    sql <span class="op">=</span> <span class="st">&quot;INSERT INTO article (nom,type_article_id,prix,stock,description,image,disponible) VALUES (</span><span class="sc">%s</span><span class="st">,</span><span class="sc">%s</span><span class="st">,</span><span class="sc">%s</span><span class="st">,</span><span class="sc">%s</span><span class="st">,</span><span class="sc">%s</span><span class="st">,</span><span class="sc">%s</span><span class="st">,&#39;1&#39;)&quot;</span></span>
<span id="cb13-90"><a href="#cb13-90" aria-hidden="true"></a>    mycursor.execute(sql, tuple_article)</span>
<span id="cb13-91"><a href="#cb13-91" aria-hidden="true"></a></span>
<span id="cb13-92"><a href="#cb13-92" aria-hidden="true"></a>mydb.commit()</span></code></pre></div>
<div id="creation-projet">
Création du projet
</div>
<p>Il est possible de créer un projet sans utiliser un environnement virtuel avec Pycharm</p>
<p><br></p>
<p>Lors de la création du projet, modifier l’interpréteur python</p>
<p><img src="img_flask/ihm_flask_tp1_1_installv2.png" style="width:15cm" /></p>
<p><img src="img_flask/ihm_flask_tp1_2_installv2.png" style="width:15cm" /></p>
<!--

* <https://info.blaisepascal.fr/gerer-une-base-de-donnees-avec-python>



<br>
* <https://stackoverflow.com/questions/43102442/whats-the-difference-between-mysqldb-mysqlclient-and-mysql-connector-python>{target=_blanck}


* <https://www.quennec.fr/trucs-astuces/langages/python/python-mysql>
* <https://realpython.com/python-mysql/>


deconnection

* <https://flask.palletsprojects.com/en/0.12.x/tutorial/dbcon/>


<br>

* <https://dev.mysql.com/doc/connector-python/en/connector-python-tutorial-cursorbuffered.html>

<br>

* <https://flask-ptbr.readthedocs.io/en/latest/tutorial/dbcon.html>
* <https://zetcode.com/python/pymysql/>{target=_blanck}
* <https://pymysql.readthedocs.io/en/latest/user/examples.html>{target=_blanck}
* <https://stackoverflow.com/questions/52818695/flask-prevent-multiple-open-mysql-connections>{target=_blanck}
* <https://flask.palletsprojects.com/en/2.0.x/patterns/sqlite3/>{target=_blanck}
* <http://www.lsis.org/elmouelhia/courses/python/coursPythonMySQL.pdf>{target=_blanck}
* <https://mariadb.com/resources/blog/how-to-connect-python-programs-to-mariadb/>


exemple nom de table : <https://dev.mysql.com/doc/connector-python/en/connector-python-example-ddl.html>


https://docs.oracle.com/en/java/java-components/advanced-management-console/2.21/install-guide/mysql-database-installation-and-configuration-advanced-management-console.html#GUID-12323233-07E3-45C2-B77A-F35B3BBA6592

-->
</body>
</html>
