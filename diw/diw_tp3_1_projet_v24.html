<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>DIW</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <link rel="stylesheet" href="markdown-pandoc-amV4.css" />
  <link rel="icon" href="favicon.ico" />
</head>
<body>
<h1 id="mini-projet">mini projet</h1>
<p>Il faut terminer la version minimum du tp précédent avant de
commencer le projet</p>
<h2
id="consignes-pour-réaliser-toutes-les-interfaces-pour-ajoutermodifiersupprimer-et-afficher-les-données-des-2-tableaux-python-de-votre-sujet">Consignes
pour Réaliser toutes les interfaces pour ajouter/modifier/supprimer et
afficher les données des 2 tableaux python de votre sujet</h2>
<p><br></p>
<p><strong>Faire les mêmes interfaces que lors des tps précédents mais
en utilisant les 2 tableaux de données de votre sujet</strong></p>
<br>
<div class="important" style="font-size: 150%;">
<p><strong>Le projet est à rendre sur <a
href="https://moodle.univ-fcomte.fr/mod/assign/view.php?id=781193">moodle
(utiliser le lien suivant), clé d’inscription: R105</a></strong> pour le
<span style="color:red"><strong>samedi 2 novembre</strong></span></p>
</div>
<p><br></p>
<p><strong>Soigner l’ergonomie des interfaces</strong> <br></p>
<p><strong>Faire attention que les contenus des pages affichées soient
valides sur W3C</strong></p>
<p><br><br></p>
<p>Respecter les consignes suivantes (surtout <a
href="https://espritweb.fr/le-snake-case-ca-te-parle/"
target="_blank">typographique</a>) :</p>
<ul>
<li><p>les <strong>noms des fonctions</strong> (méthodes) dans
l’application doivent porter le nom de l’opération puis le nom de la
table ; utiliser du <a href="https://fr.wikipedia.org/wiki/Snake_case"
target="_blank">snake_case</a> : show_nom_table add_nom_table
valid_add_nom_table delete_nom_table edit_nom_table valid_add_nom_table
…</p></li>
<li><p>les <strong>routes</strong> doivent porter le nom de la table
puis le nom de l’opération ( en kebab-case ou <a
href="https://blog.octo.com/designer-une-api-rest/#case"
target="_blank">spinal case</a>) : <code>/nom-table/show</code>
<code>/nom-table/edit</code> <code>/nom-table/add</code> …</p></li>
<li><p>créer dans le dossier <strong>templates</strong> un dossier de
vue qui porte le nom de la table (utilise du snake_case) : les noms sont
indiqués dans chaque sujet</p></li>
<li><p>mettre aux <strong>fichiers des vues</strong> des noms de la
forme (<code>add_table.html</code> <code>edit_table.html</code>
<code>show_table.html</code>)</p></li>
<li><p>les noms <strong>des champs input(name)</strong> doivent porter
le nom des clés (attribut) des dictionnaires que vous utilisez</p>
<ul>
<li>ATTENTION : les clés dans tous les tableaux python de dictionnaires
sont en <a href="https://fr.wikipedia.org/wiki/Camel_case"
target="_blank">CamelCase</a>, il faut respecter cette notation.</li>
<li>la seule clé en snake_case est la clé étrangère</li>
</ul></li>
<li><p>le contenu des dictionnaires n’est pas modifié</p></li>
<li><p><span class="modif">toutes les valeurs du formulaire des champs
INPUT doivent être affichées dans le messages “flash” lors de la
soumission du formulaire</span></p></li>
</ul>
<p><br></p>
<div class="important">
<p>Remplacer <strong>table</strong> par les 2 noms des tables de votre
sujet</strong></p>
<p><br> Volontairement, il n’y a pas de “design”, cependant voici une
démonstration des fonctionnalités du travail attendu <a
href="http://amillet1.pythonanywhere.com/"
target="_blanck">http://amillet1.pythonanywhere.com/</a></p>
<p><strong>ATTENTION</strong> : on ne doit pas retrouver le mot
<strong>article</strong> dans votre code</p>
<p>L’affichage des 2 tableaux “python” doit être <strong>sous forme de
tableaux</strong> pour afficher/ajouter/supprimer/modifier (CRUD
back-office)<br />
<br> <strong>Les 2 tableaux python ne sont jamais
modifiés</strong><br />
Les noms des champs INPUT dans les formulaires doivent porter le nom des
clés des tableaux python<br />
</p>
<p>Lors de la modification d’un enregistrement, afficher le contenu de
l’enregistrement (la ligne sélectionnée) dans les champs INPUT du
formulaire.</p>
<p><br></p>
<p>ATTENTION : utiliser le code vu en cours, l’utilisation d’une IA
générative pour produire un code non conforme au TP vu en cours peut
entraîner une grosse pénalité. * pas d’utilisation de boucle python
(exemple avec le mot clé <code>next</code>) * pas d’utilisation de la
gestion des exceptions * pas de route avec un format non utilisé en
cours (exemple <code>/nom-table/add/&lt;id&gt;</code>)</p>
</div>
<p><br></p>
<h2 id="à-déplacer">à déplacer</h2>
<h2
id="étapes-et-exemples-de-vues-consignes-css-et-bootstrap"><strong>Étapes
et exemples de vues</strong> (consignes CSS et BootStrap)</h2>
<ul>
<li><p>ajouter un “favicone” pour toutes les pages (layout)</p></li>
<li><p>corps des pages :</p>
<ul>
<li>utiliser un “container” pour définir les marges de chaque page</li>
</ul></li>
</ul>
<h4 id="menu">Menu</h4>
<ul>
<li>Faire un menu identique à celui ci-dessous</li>
</ul>
<p><img src="mini_projet/S1_diw_projet_menu_v2.png"
style="width:20cm" /></p>
<ul>
<li>utiliser <strong>Bootstrap</strong> pour créer le
<strong>menu</strong></li>
<li>c’est le même menu pour toutes les routes (URL)</li>
<li>le menu doit être un menu Bootstrap standard avec 3 boutons : de
gauche à droite le menu permet d’accéder
<ul>
<li>mettre une icône qui est un lien qui redirige sur la page d’accueil
(layout)</li>
<li>indiquer le numéro du sujet</li>
<li>un bouton pour ajouter/modifier supprimer le contenu de la table
(tableau) la plus grosse de votre sujet</li>
<li>un bouton pour ajouter/modifier supprimer le contenu de la table la
table (tableau) la plus petite de votre sujet</li>
<li>un bouton pour accéder à l’interface supplémentaire</li>
</ul></li>
</ul>
<h4 id="affichage-des-deux-tableaux-de-dictionnaires">affichage des deux
tableaux de dictionnaires</h4>
<ul>
<li>afficher le contenu des 2 dictionnaires (tables) avec les 2 routes
<code>/table/show</code> et <code>table2/show</code></li>
</ul>
<p><img src="mini_projet/S1_diw_projet_tableau_v2.png"
style="width:20cm" /></p>
<ul>
<li><strong>affichage de la grosse table</strong> : utiliser un tableau
Bootstrap, utiliser une classe pour mettre en rouge l’identifiant qui
fait référence à l’identifiant de l’autre table (cette valeur est un
numérique).</li>
</ul>
<!-- ![](img_flask/S1_diw_projet6.png){width=10cm} -->
<h4 id="formulaires">formulaires</h4>
<ul>
<li>créer 2 formulaires (un pour ajouter un enregistrement sur la route
<code>/table/add</code> et un pour pour modifier un enregistrement sur
la route <code>/table/edit</code>) pour chaque table</li>
<li><strong>attention : les noms des champs INPUT (attribut NAME)
doivent porter le nom des clés (attribut) des
dictionnaires</strong></li>
</ul>
<p><br> Consignes CSS (styles) :</p>
<ul>
<li>les formulaires doivent utiliser les classes Bootstrap, mettre en
arrière-plan de la liste déroulante une couleur
<ul>
<li>Définir <strong>uniquement</strong> le champ INPUT principal et la
liste déroulante comme <strong>requis</strong> dans le formulaire pour
ajouter un enregistrement dans la grosse table</li>
<li>Définir <strong>uniquement</strong> le champ INPUT principal comme
<strong>requis</strong> dans le formulaire pour ajouter un
enregistrement dans la petite table</li>
<li>Définir le champ INPUT avec une date de type “date”</li>
<li>Définir le champ INPUT avec des numériques de type “numeric”</li>
<li>laisser une marge à gauche et à droite de chaque formulaire</li>
</ul></li>
<li>dans le formulaire
<ul>
<li>les champs requis invalides ont un arrière plan gris</li>
<li>les listes déroulantes ont un arrière plan jaune</li>
</ul></li>
<li>ergonomie :
<ul>
<li>imposer de sélectionner une valeur dans la liste déroulante,</li>
<li>imposer de saisir un contenu du principal des principaux champs
(attributs) du dictionnaire</li>
</ul></li>
<li>utiliser une route et une variable (l’identifiant) passé en méthode
GET pour afficher le formulaire pour modifier une ligne du tableau
(sinon pénalité)</li>
<li>utiliser pour valider le formulaire la méthode POST et une route
(attribut “action” du formulaire) de nom <code>/table/add</code> ou
<code>/table/edit</code> selon l’opération</li>
</ul>
<p><img src="img_flask/S1_diw_projet7.png" style="width:13cm" /></p>
<ul>
<li>après une opération comme “ajouter”, “modifier” ou “supprimer”,
afficher un message dit “flash” avec les informations du formulaire lors
d’une création, d’une modification ou d’une suppression d’un
article</li>
</ul>
<figure>
<img src="img_flask/S1_diw_projet8.png" style="width:15cm"
alt="exemple" />
<figcaption aria-hidden="true">exemple</figcaption>
</figure>
<h2 id="interfaces-supplémentaires-interface-dun-filtre">Interfaces
supplémentaires (interface d’un filtre)</h2>
<ul>
<li>l’interface supplémentaire (interface pour le filtre) doit utiliser
la classe “cards” de Bootstrap et le plus possible les classes Bootstrap
pour le formulaire</li>
</ul>
<p>afficher les 2 contenus des 2 tables dans la même vue :</p>
<ul>
<li>afficher la seconde table dans le formulaire</li>
<li>afficher les éléments de la première table sous forme de <a
href="https://getbootstrap.com/docs/5.0/components/card/"
target="_blank">cards</a></li>
</ul>
<h4 id="formulaire">Formulaire :</h4>
<ul>
<li>afficher les éléments de la seconde table (la plus petite) sous
forme de “toggle” (cases à cocher),</li>
<li>afficher des champs INPUT pour filtrer un numérique de la table (la
plus grosse) de votre sujet ainsi qu’un champ texte pour saisir une
chaîne de texte.</li>
<li>si on valide le formulaire, afficher des messages “flash” avec les
cases “cochées” (id de la petite table) et le contenu des champs INPUT
si ils sont corrects sinon afficher un message d’erreur</li>
</ul>
<h4 id="fonctionnement-du-filtre">fonctionnement du filtre</h4>
<ul>
<li>Le filtre n’est pas fonctionnel. Seul l’affichage du contenu des 2
tableaux (python) est à réaliser, ainsi que l’affichage du contenu du
formulaire dans des messages “flash”. Tester sur <a
href="http://amillet1.pythonanywhere.com/article/filtre"
class="uri">http://amillet1.pythonanywhere.com/article/filtre</a></li>
</ul>
<figure>
<img src="img_flask/ihm_flask_projet_1.png" style="width:18cm"
alt="exemple avec les articles" />
<figcaption aria-hidden="true">exemple avec les articles</figcaption>
</figure>
<p><br> Exemple de code pour afficher le contenu du filtre</p>
<figure>
<img src="img_flask/ihm_flask_projet_1_2.png" style="width:18cm"
alt="exemple de code pour afficher les éléments du formulaire filtre si on valide le formulaire" />
<figcaption aria-hidden="true">exemple de code pour afficher les
éléments du formulaire filtre si on valide le formulaire</figcaption>
</figure>
<p>Pour comparer des réels c’est un peu plus compliqué</p>
<figure>
<img src="img_flask/ihm_flask_projet_1_3.png" style="width:14cm"
alt="modification à ajouter pour tester des réels (il faut adapter ce code)" />
<figcaption aria-hidden="true">modification à ajouter pour tester des
réels (il faut adapter ce code)</figcaption>
</figure>
<p><br></p>
<h1 id="annexe">ANNEXE</h1>
<p><span class="modif">script de test du projet :</span> <br></p>
<p><span class="modif">Un premier script extrait les archives
<code>.tar.gz</code> et <code>.zip</code>, ce script recherche un
dossier et copie un autre script <code>test_projet.sh</code> dans le
dossier. Le script <code>test_projet.sh</code> se trouve au même niveau
que le fichier app.py (une erreur est signalée dans le cas
contraire).</span></p>
<p><br></p>
<p>script de test :</p>
<pre><code>#!/bin/bash
clear

echo -e &quot;\033[0;32m \n**** listes des fonctions(snake_case: show_nom_table add_nom_table valid_add_nom_table delete_nom_table edit_nom_table valid_add_nom_table) :&quot;
grep &quot;def &quot;  app.py | uniq -c

echo -e &quot;\033[0;32m \n**** listes des fichiers (snake_case: add_table.html edit_table.html show_table.html)  : &quot;
ls templates/*

echo -e &quot;\033[0;31m \n***** listes des routes (spinal case : /nom-table/show /nom-table/edit /nom-table/add ) \033[0m&quot;
grep &quot;@app.route&quot;  app.py

echo -e &quot;\033[0;32m \n**** listes des paramètres POST (CamelCase : clés des dictionnaires, sauf la clé étrangére) :&quot;
grep &quot;request.form.get&quot;  app.py | uniq -c

echo -e &quot; \033[0m&quot;

code  app.py &amp;

killall python3
flask --debug  --app app  run   --host 0.0.0.0
</code></pre>
<!--
```
#!/bin/bash
clear
echo -e "\033[0;32m \n**** listes des fichiers :"
ls templates/*

echo -e "\033[0;31m \n***** liste des routes : \033[0m"
grep "@app.route"  app.py

echo -e "\033[0;32m \n**** listes des paramètres (clés des tableaux associatifs) :"
grep "request.form.get"  app.py | uniq -c
echo -e " \033[0m"

code  app.py &

killall python3
flask --debug  --app app  run   --host 0.0.0.0
```
-->
</body>
</html>
