<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>DIW</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="markdown-pandoc-amV4.css" />
  <link rel="icon" href="favicon.ico" />
</head>
<body>
<h1 id="objectif">Objectif</h1>
<div class="validation">
<p>Réaliser les interfaces pour afficher le contenu de 2 tableaux (table) de dictionnaires (python) ; Réaliser les interfaces minimum pour ajouter/modifier/supprimer les données d’une ligne des 2 tableaux.</p>
<ul>
<li><p>Le tp ci-dessous est à finir avant de commencer le projet</p></li>
<li><p>Une fois l’application fonctionnelle, presenter votre projet à M. MILLET lors d’un tp de base de données, vous aurez ensuite un numéro de sujet pour le mini projet qui suit.</p></li>
<li><p>Exemple d’application minimum : <a href="http://amillet1.pythonanywhere.com/" target="_blanck">http://amillet1.pythonanywhere.com/</a></p></li>
</ul>
</div>
<h1 id="utilisation-dun-moteur-de-templates">utilisation d’un moteur de templates</h1>
<div class="cours">
<ul>
<li><p>Jinja est un moteur de template. Il permet d’écrire du code Python dans un template (en plus du HTML)</p></li>
<li><p>Pour indiquer à Jinja qu’on utilise des objets Python, il faut utiliser les syntaxes <code>{{ }}</code> , <code>{% %}</code> ou <code>{# #}</code> selon le code écrit</p></li>
<li><p>Pour insérer des objets Python dans un template, il faut les passer en paramètres de la fonction <code>render_template</code> au niveau de la vue</p></li>
<li><p><strong>Jinja permet d’étendre des templates grâce à l’héritage : Pour éviter de dupliquer du code, vous pouvez importer des templates HTML au sein d’un autre template</strong></p></li>
</ul>
<h2 id="instructions-dans-les-gabarits-templates">Instructions dans les Gabarits (templates)</h2>
<h3 id="afficher-des-variables">afficher des variables</h3>
<pre><code>{{ variable }}

{{ MyDictionnary.key }}
</code></pre>
<p>Les résultats des requêtes SQL sont le plus souvent un <a href="https://www.w3schools.com/python/python_dictionaries.asp" target="_blank">dictionnaire</a> (une seule colonne) ou une liste de dictionnaires (une liste de tuples (occurrences, enregistrements))</p>
<h3 id="conditions-et-boucles">conditions et boucles</h3>
<p>2 structures de contrôles</p>
<pre><code>{% for ... in ... %} 
     ... 
{% endfor %}


{% if ... %} 
     ... 
{% else %}
     ... 
{% endif %}</code></pre>
<h3 id="commentaire">commentaire</h3>
<pre><code>{# commentaires #}</code></pre>
<p><img src="img_flask/flask_tp2_t1.png" style="width:10cm" /></p>
<h2 id="heritage">heritage</h2>
<p>Pour éviter des répétitions entre templates, il est possible de recourir à un mécanisme d’héritage. Pour hériter de la structure d’un template base.html, il faut indiquer à la première ligne du template hérité :</p>
<pre><code>{% extends &#39;base.html&#39; %}</code></pre>
<p>Lors de l’héritage, certains blocs de codes peuvent être surchargés. Ces blocs sont définis via le tag <code>block</code> et <code>endblock</code></p>
<pre><code>{% block mon_block %} ... {% endblock %}</code></pre>
<ul>
<li>pour récupérer le contenu d’un block</li>
</ul>
<pre><code>  {{ super() }}</code></pre>
<p><img src="img_flask/flask_tp2_t2.png" style="width:10cm" /></p>
<h2 id="moteurs-de-templates-similaires">moteurs de templates similaires</h2>
<ul>
<li><a href="https://palletsprojects.com/p/jinja/" target="_blanck">jinja</a> sur flask django</li>
<li><a href="https://twig.symfony.com/" target="_blanck">twig</a> sur symfony (php)</li>
<li><a href="https://mozilla.github.io/nunjucks/" target="_blanck">nunjucks</a> sur nodejs (javascript typescript)</li>
</ul>
</div>
<h1 id="application-1">application 1</h1>
<h2 id="exemple-dhéritage-la-première-vue">exemple d’héritage : la première vue</h2>
<p>créer un nouveau projet <strong>flask</strong> sur pycharm</p>
<p><br></p>
<p>ouvrir un terminal et créer les dossiers et les fichiers pour les vues</p>
<pre><code>touch templates/layout.html  templates/_nav.html
mkdir templates/article templates/type_article
touch templates/article/show_article.html  templates/article/add_article.html templates/article/edit_article.html
touch templates/type_article/show_type_article.html  templates/type_article/add_type_article.html templates/type_article/edit_type_article.html
touch static/mes_styles.css
touch launcher.sh
chmod u+x launcher.sh</code></pre>
<p>créer un lanceur comme dans tp précedent <strong>launcher.sh</strong></p>
<pre><code>flask --debug  --app app  run  --host 0.0.0.0</code></pre>
<p><br></p>
<p>Copier <a href="https://cours-info.iut-bm.univ-fcomte.fr/upload/perso/77/S1_IHM/source/tp5_static.zip">les fichiers ressources</a> dans le dossier <strong>static</strong></p>
<p>Pour ouvrir rapidement le dossier <strong>static</strong> et extraire l’archive avec <strong>pycharm</strong> : ouvrir le dossier <strong>static</strong> <code>[clic droit sur le dossier static][open in][files] ou [directory path]</code> et glisser le contenu de l’archive dans le dossier <strong>static</strong> ouvert avec l’explorateur de fichiers.</p>
<p><br></p>
<figure>
<img src="img_flask/ihm_flask_crud_1.png" style="width:27cm" alt="" /><figcaption>heritage dans les vues</figcaption>
</figure>
<figure>
<img src="img_flask/diw_flask_crud_1.png" style="width:27cm" alt="" /><figcaption>heritage dans les vues</figcaption>
</figure>
<p>remplacer le code du fichier <strong>app.py</strong></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true"></a><span class="co">#! /usr/bin/python</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true"></a><span class="co"># -*- coding:utf-8 -*-</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true"></a><span class="im">from</span> flask <span class="im">import</span> Flask, request, render_template, redirect, url_for, abort, flash</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true"></a>app <span class="op">=</span> Flask(<span class="va">__name__</span>)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true"></a>app.secret_key <span class="op">=</span> <span class="st">&#39;une cle(token) : grain de sel(any random string)&#39;</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true"></a>articles <span class="op">=</span> [</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;nom&#39;</span>: <span class="st">&#39;Enveloppes (50p)&#39;</span>, <span class="st">&#39;type_article_id&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;prix&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;stock&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;description&#39;</span>: <span class="va">None</span>, <span class="st">&#39;image&#39;</span>: <span class="va">None</span>},</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;nom&#39;</span>: <span class="st">&#39;Stylo noir&#39;</span>, <span class="st">&#39;type_article_id&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;prix&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;stock&#39;</span>: <span class="dv">10</span>, <span class="st">&#39;description&#39;</span>: <span class="va">None</span>, <span class="st">&#39;image&#39;</span>: <span class="st">&#39;stylo.jpeg&#39;</span>},</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;nom&#39;</span>: <span class="st">&#39;Boite de rangement&#39;</span>, <span class="st">&#39;type_article_id&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;prix&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;stock&#39;</span>: <span class="dv">7</span>, <span class="st">&#39;description&#39;</span>: <span class="va">None</span>, <span class="st">&#39;image&#39;</span>: <span class="st">&#39;boites.jpeg&#39;</span>},</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">4</span>, <span class="st">&#39;nom&#39;</span>: <span class="st">&#39;Chaise&#39;</span>, <span class="st">&#39;type_article_id&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;prix&#39;</span>: <span class="dv">40</span>, <span class="st">&#39;stock&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;description&#39;</span>: <span class="va">None</span>, <span class="st">&#39;image&#39;</span>: <span class="st">&#39;chaise.jpeg&#39;</span>},</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">5</span>, <span class="st">&#39;nom&#39;</span>: <span class="st">&#39;Tables&#39;</span>, <span class="st">&#39;type_article_id&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;prix&#39;</span>: <span class="dv">200</span>, <span class="st">&#39;stock&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;description&#39;</span>: <span class="va">None</span>, <span class="st">&#39;image&#39;</span>: <span class="st">&#39;table.jpeg&#39;</span>},</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">6</span>, <span class="st">&#39;nom&#39;</span>: <span class="st">&#39;Salon de Jardin alu&#39;</span>, <span class="st">&#39;type_article_id&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;prix&#39;</span>: <span class="dv">149</span>, <span class="st">&#39;stock&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;description&#39;</span>: <span class="va">None</span>, <span class="st">&#39;image&#39;</span>: <span class="st">&#39;salonJardin2.jpg&#39;</span>},</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">7</span>, <span class="st">&#39;nom&#39;</span>: <span class="st">&#39;Table+6 fauteuilles de Jardin&#39;</span>, <span class="st">&#39;type_article_id&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;prix&#39;</span>: <span class="dv">790</span>, <span class="st">&#39;stock&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;description&#39;</span>: <span class="va">None</span>, <span class="st">&#39;image&#39;</span>: <span class="st">&#39;tableFauteuilsJardin1.jpg&#39;</span>},</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">8</span>, <span class="st">&#39;nom&#39;</span>: <span class="st">&#39;Set Table + 4 bancs&#39;</span>, <span class="st">&#39;type_article_id&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;prix&#39;</span>: <span class="dv">229</span>, <span class="st">&#39;stock&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;description&#39;</span>: <span class="va">None</span>, <span class="st">&#39;image&#39;</span>: <span class="st">&#39;setTableChaises.jpg&#39;</span>},</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">9</span>, <span class="st">&#39;nom&#39;</span>: <span class="st">&#39;arrosoir bleu&#39;</span>, <span class="st">&#39;type_article_id&#39;</span>: <span class="dv">4</span>, <span class="st">&#39;prix&#39;</span>: <span class="dv">14</span>, <span class="st">&#39;stock&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;description&#39;</span>: <span class="va">None</span>, <span class="st">&#39;image&#39;</span>: <span class="st">&#39;arrosoir1.jpg&#39;</span>},</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">10</span>, <span class="st">&#39;nom&#39;</span>: <span class="st">&#39;arrosoir griotte&#39;</span>, <span class="st">&#39;type_article_id&#39;</span>: <span class="dv">4</span>, <span class="st">&#39;prix&#39;</span>: <span class="dv">10</span>, <span class="st">&#39;stock&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;description&#39;</span>: <span class="va">None</span>, <span class="st">&#39;image&#39;</span>: <span class="st">&#39;arrosoir2.jpg&#39;</span>}, </span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">11</span>, <span class="st">&#39;nom&#39;</span>: <span class="st">&#39;tuyau arrosage&#39;</span>, <span class="st">&#39;type_article_id&#39;</span>: <span class="dv">4</span>, <span class="st">&#39;prix&#39;</span>: <span class="dv">32</span>, <span class="st">&#39;stock&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;description&#39;</span>: <span class="va">None</span>, <span class="st">&#39;image&#39;</span>: <span class="st">&#39;tuyauArrosage1.jpg&#39;</span>}, </span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">12</span>, <span class="st">&#39;nom&#39;</span>: <span class="st">&#39;tournevis&#39;</span>, <span class="st">&#39;type_article_id&#39;</span>: <span class="dv">5</span>, <span class="st">&#39;prix&#39;</span>: <span class="dv">24</span>, <span class="st">&#39;stock&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;description&#39;</span>: <span class="va">None</span>, <span class="st">&#39;image&#39;</span>: <span class="st">&#39;lotTourneVis.jpg&#39;</span>},</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">13</span>, <span class="st">&#39;nom&#39;</span>: <span class="st">&#39;marteau menuisier&#39;</span>, <span class="st">&#39;type_article_id&#39;</span>: <span class="dv">5</span>, <span class="st">&#39;prix&#39;</span>: <span class="dv">8</span>, <span class="st">&#39;stock&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;description&#39;</span>: <span class="va">None</span>, <span class="st">&#39;image&#39;</span>: <span class="st">&#39;marteau.jpg&#39;</span>},</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">14</span>, <span class="st">&#39;nom&#39;</span>: <span class="st">&#39;pince multiprise&#39;</span>, <span class="st">&#39;type_article_id&#39;</span>: <span class="dv">5</span>, <span class="st">&#39;prix&#39;</span>: <span class="dv">22</span>, <span class="st">&#39;stock&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;description&#39;</span>: <span class="va">None</span>, <span class="st">&#39;image&#39;</span>: <span class="st">&#39;pinceMultiprise.jpg&#39;</span>}, </span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">15</span>, <span class="st">&#39;nom&#39;</span>: <span class="st">&#39;perceuse&#39;</span>, <span class="st">&#39;type_article_id&#39;</span>: <span class="dv">5</span>, <span class="st">&#39;prix&#39;</span>: <span class="dv">150</span>, <span class="st">&#39;stock&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;description&#39;</span>: <span class="va">None</span>, <span class="st">&#39;image&#39;</span>: <span class="st">&#39;perceuse.jpg&#39;</span>}    </span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true"></a>]</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true"></a></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true"></a>types_articles <span class="op">=</span> [</span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">1</span>, <span class="st">&#39;libelle&#39;</span>: <span class="st">&#39;Fourniture de bureau&#39;</span>},</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">2</span>, <span class="st">&#39;libelle&#39;</span>: <span class="st">&#39;Mobilier&#39;</span>},</span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">3</span>, <span class="st">&#39;libelle&#39;</span>: <span class="st">&#39;Mobilier Jardin&#39;</span>},</span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">4</span>, <span class="st">&#39;libelle&#39;</span>: <span class="st">&#39;Arrosage&#39;</span>},</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">5</span>, <span class="st">&#39;libelle&#39;</span>: <span class="st">&#39;Outils&#39;</span>},</span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true"></a>    {<span class="st">&#39;id&#39;</span>: <span class="dv">6</span>, <span class="st">&#39;libelle&#39;</span>: <span class="st">&#39;Divers&#39;</span>}</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true"></a>]</span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true"></a></span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true"></a><span class="at">@app.route</span>(<span class="st">&#39;/&#39;</span>)</span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true"></a><span class="kw">def</span> show_accueil():</span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true"></a>    <span class="cf">return</span> render_template(<span class="st">&#39;layout.html&#39;</span>)</span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true"></a></span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&#39;__main__&#39;</span>:</span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true"></a>    app.run()</span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true"></a></span></code></pre></div>
<p>ajouter au fichier <strong>templates/layout.html</strong> le contenu ci-dessous :</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true"></a><span class="dt">&lt;!doctype </span>html<span class="dt">&gt;</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true"></a><span class="kw">&lt;html</span><span class="ot"> lang=</span><span class="st">&quot;fr&quot;</span><span class="kw">&gt;</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true"></a><span class="kw">&lt;head&gt;</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true"></a>    <span class="kw">&lt;meta</span><span class="ot"> charset=</span><span class="st">&quot;utf-8&quot;</span><span class="kw">&gt;</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true"></a>    <span class="kw">&lt;meta</span><span class="ot"> name=</span><span class="st">&quot;viewport&quot;</span><span class="ot"> content=</span><span class="st">&quot;width=device-width, initial-scale=1, shrink-to-fit=no&quot;</span><span class="kw">&gt;</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true"></a>    {% block title %}</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true"></a>        <span class="kw">&lt;title&gt;</span>layout<span class="kw">&lt;/title&gt;</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true"></a>    {% endblock %}</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true"></a>    <span class="kw">&lt;link</span><span class="ot"> rel=</span><span class="st">&quot;shortcut icon&quot;</span><span class="ot"> href=</span><span class="st">&quot;{{ url_for(&#39;static&#39;, filename=&#39;favicon.ico&#39;) }}&quot;</span> <span class="kw">&gt;</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true"></a>    {% block stylesheets %}</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true"></a>        <span class="kw">&lt;link</span><span class="ot"> rel=</span><span class="st">&quot;stylesheet&quot;</span><span class="ot"> href=</span><span class="st">&quot;{{ url_for(&#39;static&#39;, filename=&#39;mes_styles.css&#39;) }}&quot;</span> <span class="kw">&gt;</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true"></a>        {#<span class="kw">&lt;link</span><span class="ot"> rel=</span><span class="st">&quot;stylesheet&quot;</span><span class="ot"> href=</span><span class="st">&quot;{{ url_for(&#39;static&#39;, filename=&#39;bootstrap/css/bootstrap.css&#39;) }}&quot;</span> <span class="kw">&gt;</span>#}</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true"></a>    {% endblock %}</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true"></a><span class="kw">&lt;/head&gt;</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true"></a><span class="kw">&lt;body&gt;</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true"></a>{% include(&#39;_nav.html&#39;) %}</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true"></a></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true"></a>{% block body %}</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true"></a>    <span class="kw">&lt;h2</span><span class="ot"> style=</span><span class="st">&quot;color:blue&quot;</span><span class="kw">&gt;</span>layout.html<span class="kw">&lt;/h2&gt;</span>  </span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true"></a>{% endblock %}</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true"></a>{% block javascripts %}</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true"></a>    {#<span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">&quot;{{ url_for(&#39;static&#39;, filename=&#39;bootstrap/js/bootstrap.js&#39;) }}&quot;</span><span class="kw">&gt;&lt;/script&gt;</span>#}</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true"></a>{% endblock %}</span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true"></a><span class="kw">&lt;/body&gt;</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true"></a><span class="kw">&lt;/html&gt;</span></span></code></pre></div>
<p>ajouter au fichier <strong><code>templates/_nav.html</code></strong> le contenu ci-dessous :</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true"></a><span class="kw">&lt;nav</span><span class="ot"> class=</span><span class="st">&quot;menu&quot;</span><span class="kw">&gt;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true"></a>    <span class="kw">&lt;a</span><span class="ot"> href=</span><span class="st">&quot;/article/show&quot;</span><span class="kw">&gt;</span> article <span class="kw">&lt;/a&gt;</span>  -</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true"></a>    <span class="kw">&lt;a</span><span class="ot"> href=</span><span class="st">&quot;/type-article/show&quot;</span><span class="kw">&gt;</span> type d&#39;article <span class="kw">&lt;/a&gt;</span>  -</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true"></a><span class="kw">&lt;/nav&gt;</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true"></a><span class="kw">&lt;hr&gt;</span></span></code></pre></div>
<ul>
<li><p>la forme de la troisième URL est celle recommandée dans la <a href="https://flask.palletsprojects.com/en/2.0.x/quickstart/#url-building" target="_blank">documentation</a></p></li>
<li><p>ajouter dans le fichier de style <strong>static/mes_styles.css</strong></p></li>
</ul>
<div class="sourceCode" id="cb12"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true"></a>table <span class="op">,</span>tr {</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true"></a>  <span class="kw">table-layout</span>: <span class="dv">fixed</span><span class="op">;</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true"></a>  <span class="kw">width</span>: <span class="dv">80</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true"></a>    <span class="kw">height</span>: <span class="dv">40</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true"></a>  <span class="kw">border-collapse</span>: <span class="dv">collapse</span><span class="op">;</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true"></a>  <span class="kw">border</span>: <span class="dv">1</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">purple</span><span class="op">;</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true"></a>  <span class="kw">background-color</span>: <span class="cn">yellow</span><span class="op">;</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true"></a>}</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true"></a></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true"></a>a {</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true"></a>    <span class="kw">width</span>:<span class="dv">150</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true"></a>    <span class="kw">height</span>: <span class="dv">30</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true"></a>    <span class="kw">background-color</span>:<span class="cn">gold</span><span class="op">;</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true"></a>    <span class="kw">border</span>: <span class="dv">1</span><span class="dt">px</span> <span class="cn">green</span> <span class="dv">groove</span> <span class="op">;</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true"></a>    <span class="kw">text-align</span>:<span class="dv">center</span><span class="op">;</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true"></a>    <span class="kw">vertical-align</span>: <span class="dv">middle</span><span class="op">;</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true"></a>    <span class="kw">padding</span>: <span class="dv">5</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true"></a>    <span class="kw">margin</span> : <span class="dv">5</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true"></a>    <span class="kw">border-radius</span>: <span class="dv">15</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true"></a>}</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true"></a></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true"></a></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true"></a><span class="fu">.flashes</span> {</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true"></a>    <span class="kw">padding</span>: <span class="dv">5</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true"></a>    <span class="kw">margin</span> : <span class="dv">5</span><span class="dt">px</span><span class="op">;</span> </span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true"></a>}</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true"></a></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true"></a><span class="fu">.alert-warning</span> {</span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true"></a>    <span class="kw">background-color</span>: <span class="fu">rgba(</span><span class="dv">255</span><span class="op">,</span> <span class="dv">197</span><span class="op">,</span> <span class="dv">197</span><span class="op">,</span> <span class="dv">1</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true"></a>}</span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true"></a><span class="fu">.alert-success</span> {</span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true"></a>    <span class="kw">background-color</span>: <span class="cn">#bdfdbd</span><span class="op">;</span></span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true"></a>}</span></code></pre></div>
<ul>
<li>utiliser <a href="https://cours-info.iut-bm.univ-fcomte.fr/upload/perso/77/S1_IHM/source/tp5_static.zip">les fichiers de ressources</a> et dé-archiver ce fichier dans le dossier <strong>static</strong> de l’application</li>
</ul>
<div class="cours">
<p>⚠️ =&gt; Si les nouveaux styles ne sont pas prise en compte : ATTENTION au cache du navigateur, il faut parfois effacer ce cache</p>
<ul>
<li>chrome <code>[paramètres][confidentialité][vider le cache]</code></li>
<li>mozilla <code>[préférences][vie privée et sécurité][Effacer les données ...][contenu web en cache]</code></li>
</ul>
<p>Le plus simple est d’installer une extension sur <a href="https://chrome.google.com/webstore/detail/clear-cache/">chrome</a> ou sur <a href="https://addons.mozilla.org/fr/firefox/addon/clearcache/">mozilla</a> pour supprimer le cache du navigateur</p>
</div>
<h2 id="affichage-du-premier-tableau-de-données-les-types-darticles">affichage du premier tableau de données : les types d’articles</h2>
<p><br></p>
<p>ajouter au fichier <strong>templates/type_article/show_type_article.html</strong> le contenu ci-dessous :</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true"></a>{% extends &#39;layout.html&#39; %}</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true"></a>{% block title %}</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true"></a>    <span class="kw">&lt;title&gt;</span>afficher les types d&#39;article<span class="kw">&lt;/title&gt;</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true"></a>{% endblock %}</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true"></a>{% block body %}</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true"></a><span class="kw">&lt;h3&gt;</span>Types d&#39;article<span class="kw">&lt;/h3&gt;</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true"></a><span class="kw">&lt;a</span><span class="ot"> href=</span><span class="st">&quot;/type-article/add&quot;</span><span class="kw">&gt;</span>ajouter un type d&#39;article<span class="kw">&lt;/a&gt;</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true"></a><span class="kw">&lt;br&gt;&lt;br&gt;</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true"></a></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true"></a><span class="kw">&lt;table</span><span class="ot"> class=</span><span class="st">&quot;table&quot;</span><span class="kw">&gt;</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true"></a>    <span class="kw">&lt;thead</span><span class="ot"> class=</span><span class="st">&quot;thead-dark&quot;</span><span class="kw">&gt;</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true"></a>        <span class="kw">&lt;tr&gt;</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true"></a>            <span class="kw">&lt;th&gt;</span>id<span class="kw">&lt;/th&gt;&lt;th&gt;</span>designation<span class="kw">&lt;/th&gt;&lt;th&gt;</span>opération<span class="kw">&lt;/th&gt;</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true"></a>        <span class="kw">&lt;/tr&gt;</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true"></a>    <span class="kw">&lt;/thead&gt;</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true"></a>    <span class="kw">&lt;tbody&gt;</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true"></a>    {% if types_articles | length &gt;= 1 %}</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true"></a>        {% for ligne in types_articles %}</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true"></a>           <span class="kw">&lt;tr&gt;</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true"></a>                  <span class="kw">&lt;td&gt;</span>{{ ligne.id }}<span class="kw">&lt;/td&gt;</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true"></a>                  <span class="kw">&lt;td&gt;</span>{{ ligne.libelle }}<span class="kw">&lt;/td&gt;</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true"></a>                  <span class="kw">&lt;td&gt;</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true"></a>                      <span class="kw">&lt;a</span><span class="ot"> href=</span><span class="st">&quot;/type-article/edit?id={{ ligne.id }}&quot;</span><span class="kw">&gt;</span>editer<span class="kw">&lt;/a&gt;</span><span class="dv">&amp;nbsp;</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true"></a>                      <span class="kw">&lt;a</span><span class="ot"> href=</span><span class="st">&quot;/type-article/delete?id={{ ligne.id }}&quot;</span> <span class="kw">&gt;</span>supprimer<span class="kw">&lt;/a&gt;</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true"></a>                  <span class="kw">&lt;/td&gt;</span></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true"></a>           <span class="kw">&lt;/tr&gt;</span></span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true"></a>        {% endfor %}</span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true"></a>    {% else %}</span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true"></a>            <span class="kw">&lt;tr&gt;</span></span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true"></a>                  <span class="kw">&lt;td&gt;</span></span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true"></a>                      pas de type d&#39;article</span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true"></a>                  <span class="kw">&lt;/td&gt;</span></span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true"></a>           <span class="kw">&lt;/tr&gt;</span></span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true"></a>    {% endif %}</span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true"></a>    <span class="kw">&lt;/tbody&gt;</span></span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true"></a><span class="kw">&lt;/table&gt;</span></span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true"></a>{% endblock %}</span></code></pre></div>
<ul>
<li>ajouter une route dans le fichier <strong>app.py</strong> pour charger cette vue</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true"></a><span class="at">@app.route</span>(<span class="st">&#39;/type-article/show&#39;</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true"></a><span class="kw">def</span> show_type_article():</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true"></a>    <span class="co">#print(types_articles)</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true"></a>    <span class="cf">return</span> render_template(<span class="st">&#39;type_article/show_type_article.html&#39;</span>, types_articles<span class="op">=</span>types_articles)</span></code></pre></div>
<ul>
<li>lancer l’application et tester la route pour <strong>afficher les types d’article</strong></li>
</ul>
<h2 id="formulaire-pour-ajouter-un-type-darticle">formulaire pour ajouter un type d’article</h2>
<ul>
<li>ajouter dans la vue <strong>template/type_article/add_type_article.html</strong> le code pour ajouter un type d’article</li>
</ul>
<div class="sourceCode" id="cb15"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true"></a>{% extends &#39;layout.html&#39; %}</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true"></a>{% block title %}</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true"></a>    <span class="kw">&lt;title&gt;</span>ajouter un type d&#39;article<span class="kw">&lt;/title&gt;</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true"></a>{% endblock %}</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true"></a>{% block body %}</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true"></a>  <span class="kw">&lt;h2&gt;</span>ajout d&#39;un type d&#39;article<span class="kw">&lt;/h2&gt;</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true"></a>  {% if error %}</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true"></a>    <span class="kw">&lt;p</span><span class="ot"> class=</span><span class="st">error</span><span class="kw">&gt;&lt;strong&gt;</span>Error:<span class="kw">&lt;/strong&gt;</span> {{ error }}</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true"></a>  {% endif %}</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true"></a>  <span class="kw">&lt;form</span><span class="ot"> method=</span><span class="st">&quot;post&quot;</span><span class="ot"> action=</span><span class="st">&quot;/type-article/add&quot;</span> <span class="kw">&gt;</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true"></a>    <span class="kw">&lt;fieldset&gt;</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true"></a>        <span class="kw">&lt;legend&gt;</span> Créer un type d&#39;article<span class="kw">&lt;/legend&gt;</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true"></a>        <span class="kw">&lt;label</span><span class="ot"> for=</span><span class="st">&quot;libelle&quot;</span><span class="kw">&gt;</span>libelle<span class="kw">&lt;/label&gt;&lt;br&gt;</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true"></a>        <span class="kw">&lt;input</span><span class="ot"> id=</span><span class="st">&quot;libelle&quot;</span><span class="ot"> type=</span><span class="st">&quot;text&quot;</span><span class="ot"> name=</span><span class="st">&quot;libelle&quot;</span><span class="ot"> size=</span><span class="st">&quot;18&quot;</span><span class="ot"> value=</span><span class="st">&quot;&quot;</span><span class="ot"> placeholder=</span><span class="st">&quot;Saisir le libelle du type de l&#39;article&quot;</span><span class="kw">&gt;&lt;br&gt;</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true"></a>        <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;submit&quot;</span><span class="ot"> value=</span><span class="st">&quot;Creer&quot;</span><span class="ot"> name=</span><span class="st">&quot;Valider&quot;</span> <span class="kw">&gt;</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true"></a>    <span class="kw">&lt;/fieldset&gt;</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true"></a>  <span class="kw">&lt;/form&gt;</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true"></a>{% endblock %}</span></code></pre></div>
<ul>
<li>ajouter dans le fichier de l’application <strong>app.py</strong> la route et la fonction (méthode) pour charger cette vue</li>
</ul>
<div class="sourceCode" id="cb16"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true"></a><span class="at">@app.route</span>(<span class="st">&#39;/type-article/add&#39;</span>, methods<span class="op">=</span>[<span class="st">&#39;GET&#39;</span>])</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true"></a><span class="kw">def</span> add_type_article():</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true"></a>    <span class="cf">return</span> render_template(<span class="st">&#39;type_article/add_type_article.html&#39;</span>)</span></code></pre></div>
<ul>
<li>lancer l’application et tester la route pour <strong>afficher le formulaire pour créer un type d’article</strong></li>
</ul>
<h1 id="passage-de-paramètres-dun-formulaire-à-lapplication-méthode-post-ajouter-des-données">passage de paramètres d’un formulaire à l’application : Méthode POST : ajouter des données</h1>
<ul>
<li>ajouter dans le fichier de l’application <strong>app.py</strong> la route et la fonction (méthode) pour traiter les paramètres du formulaire</li>
</ul>
<div class="sourceCode" id="cb17"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true"></a><span class="at">@app.route</span>(<span class="st">&#39;/type-article/add&#39;</span>, methods<span class="op">=</span>[<span class="st">&#39;POST&#39;</span>])</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true"></a><span class="kw">def</span> valid_add_type_article():</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true"></a>    libelle <span class="op">=</span> request.form.get(<span class="st">&#39;libelle&#39;</span>, <span class="st">&#39;&#39;</span>)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true"></a>    <span class="bu">print</span>(<span class="st">u&#39;type ajouté , libellé :&#39;</span>, libelle)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true"></a>    message <span class="op">=</span> <span class="st">u&#39;type ajouté , libellé :&#39;</span><span class="op">+</span>libelle</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true"></a>    flash(message, <span class="st">&#39;alert-success&#39;</span>)</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true"></a>    <span class="cf">return</span> redirect(<span class="st">&#39;/type-article/show&#39;</span>)</span></code></pre></div>
<p>ajouter après l’instruction <code>{% include('_nav.html') %}</code> dans le fichier <strong>templates/layout.html</strong> les instructions suivantes pour afficher les messages “flash”</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true"></a>{% with messages = get_flashed_messages(with_categories=true) %}</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true"></a>{% if messages %}</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true"></a>    {% for categorie, message in messages %}</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true"></a>    <span class="kw">&lt;div</span><span class="ot"> role=</span><span class="st">&quot;alert&quot;</span><span class="ot"> class=</span><span class="st">&quot;alert {{ categorie }}&quot;</span><span class="kw">&gt;</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true"></a>           Information : <span class="kw">&lt;strong&gt;</span>{{ message }}<span class="kw">&lt;/strong&gt;</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true"></a>    <span class="kw">&lt;/div&gt;</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true"></a>    {% endfor %}</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true"></a>{% endif %}</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true"></a>{% endwith %}</span></code></pre></div>
<figure>
<img src="img_flask/ihm_flask_crud_2.png" style="width:27cm" alt="" /><figcaption>passage de paramètres d’un formulaire à l’application</figcaption>
</figure>
<p>l’application <em>flask</em> récupère un objet <strong>request</strong>, cet objet possède tous les paramètres <code>INPUT [NAME avec pour valeur VALUE]</code> passés dans la requête HTTP</p>
<p><br></p>
<h1 id="passage-de-paramètres-dun-lien-à-lapplication-méthode-get-supprimer-des-données">passage de paramètres d’un lien à l’application : Méthode GET : supprimer des données</h1>
<ul>
<li>ajouter dans le fichier de l’application <strong>app.py</strong> la route et la fonction (méthode) pour traiter les paramètres du lien</li>
</ul>
<div class="sourceCode" id="cb19"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true"></a><span class="at">@app.route</span>(<span class="st">&#39;/type-article/delete&#39;</span>, methods<span class="op">=</span>[<span class="st">&#39;GET&#39;</span>])</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true"></a><span class="kw">def</span> delete_type_article():</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true"></a>    <span class="bu">id</span> <span class="op">=</span> request.args.get(<span class="st">&#39;id&#39;</span>, <span class="st">&#39;&#39;</span>)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true"></a>    <span class="bu">print</span> (<span class="st">&quot;un type d&#39;article supprimé, id :&quot;</span>,<span class="bu">id</span>)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true"></a>    message<span class="op">=</span><span class="st">u&#39;un type d</span><span class="ch">\&#39;</span><span class="st">article supprimé, id : &#39;</span> <span class="op">+</span> <span class="bu">id</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true"></a>    flash(message, <span class="st">&#39;alert-warning&#39;</span>)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true"></a>    <span class="cf">return</span> redirect(<span class="st">&#39;/type-article/show&#39;</span>)</span></code></pre></div>
<figure>
<img src="img_flask/ihm_flask_crud_3.png" style="width:27cm" alt="" /><figcaption>passage de paramètres d’un lien(url) à l’application</figcaption>
</figure>
<p>PS : pour modifier ajouter ou supprimer, il faudrait toujours utiliser un formulaire pour des raisons de sécurité (faille CSRF)</p>
<h1 id="modifier-des-données-passage-de-paramètres-dun-lien-à-lapplication-méthode-get.-passage-de-paramètres-dun-formulaire-à-lapplication-méthode-post">modifier des données : Passage de paramètres d’un lien à l’application : Méthode GET. Passage de paramètres d’un formulaire à l’application : Méthode POST</h1>
<ul>
<li>ajouter dans le fichier de l’application <strong>app.py</strong> la route et la fonction (méthode) pour traiter les paramètres du lien et afficher le formulaire avec les données de la ligne sélectionnée. La deuxième fonction traite les données du formulaire comme pour ajouter un enregistrement dans une table.</li>
</ul>
<div class="sourceCode" id="cb20"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true"></a><span class="at">@app.route</span>(<span class="st">&#39;/type-article/edit&#39;</span>, methods<span class="op">=</span>[<span class="st">&#39;GET&#39;</span>])</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true"></a><span class="kw">def</span> edit_type_article():</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true"></a>    <span class="bu">id</span> <span class="op">=</span> request.args.get(<span class="st">&#39;id&#39;</span>, <span class="st">&#39;&#39;</span>)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true"></a>    libelle <span class="op">=</span> request.args.get(<span class="st">&#39;libelle&#39;</span>, <span class="st">&#39;&#39;</span>)     <span class="co"># comment passé plusieurs paramètres (clé primaire composés)</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true"></a>    <span class="bu">id</span><span class="op">=</span><span class="bu">int</span>(<span class="bu">id</span>)</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true"></a>    type_article <span class="op">=</span> types_articles[<span class="bu">id</span><span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true"></a>    <span class="cf">return</span> render_template(<span class="st">&#39;type_article/edit_type_article.html&#39;</span>, type_article<span class="op">=</span>type_article)</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true"></a></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true"></a><span class="at">@app.route</span>(<span class="st">&#39;/type-article/edit&#39;</span>, methods<span class="op">=</span>[<span class="st">&#39;POST&#39;</span>])</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true"></a><span class="kw">def</span> valid_edit_type_article():</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true"></a>    libelle <span class="op">=</span> request.form[<span class="st">&#39;libelle&#39;</span>]</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true"></a>    <span class="bu">id</span> <span class="op">=</span> request.form.get(<span class="st">&#39;id&#39;</span>, <span class="st">&#39;&#39;</span>)</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true"></a>    <span class="bu">print</span>(<span class="st">u&#39;type article modifié, id: &#39;</span>,<span class="bu">id</span>, <span class="st">&quot; libelle :&quot;</span>, libelle)</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true"></a>    message<span class="op">=</span><span class="st">u&#39;type article modifié, id: &#39;</span> <span class="op">+</span> <span class="bu">id</span> <span class="op">+</span> <span class="st">&quot; libelle : &quot;</span> <span class="op">+</span> libelle</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true"></a>    flash(message, <span class="st">&#39;alert-success&#39;</span>)</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true"></a>    <span class="cf">return</span> redirect(<span class="st">&#39;/type-article/show&#39;</span>)</span></code></pre></div>
<ul>
<li>ajouter dans la vue <strong>template/type_article/edit_type_article.html</strong> le code pour ajouter un type d’article</li>
</ul>
<div class="sourceCode" id="cb21"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true"></a>{% extends &#39;layout.html&#39; %}</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true"></a>{% block title %}</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true"></a>    <span class="kw">&lt;title&gt;</span>modifier un type d&#39;article<span class="kw">&lt;/title&gt;</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true"></a>{% endblock %}</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true"></a>{% block body %}</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true"></a>  <span class="kw">&lt;h2&gt;</span>modifier un type d&#39;article<span class="kw">&lt;/h2&gt;</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true"></a>  {% if error %}</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true"></a>    <span class="kw">&lt;p</span><span class="ot"> class=</span><span class="st">error</span><span class="kw">&gt;&lt;strong&gt;</span>Error:<span class="kw">&lt;/strong&gt;</span> {{ error }}</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true"></a>  {% endif %}</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true"></a>  <span class="kw">&lt;form</span><span class="ot"> method=</span><span class="st">&quot;post&quot;</span><span class="ot"> action=</span><span class="st">&quot;/type-article/edit&quot;</span><span class="kw">&gt;</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true"></a>    <span class="kw">&lt;fieldset&gt;</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true"></a>        <span class="kw">&lt;legend&gt;</span> Modifier un type d&#39;article<span class="kw">&lt;/legend&gt;</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true"></a>        <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;hidden&quot;</span><span class="ot"> name=</span><span class="st">&quot;id&quot;</span><span class="ot"> size=</span><span class="st">&quot;18&quot;</span><span class="ot"> value=</span><span class="st">&quot;{{ type_article.id }}&quot;</span><span class="ot"> id=</span><span class="st">&quot;id&quot;</span><span class="kw">&gt;</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true"></a>        <span class="kw">&lt;label</span><span class="ot"> for=</span><span class="st">&quot;libelle&quot;</span><span class="kw">&gt;</span>libelle<span class="kw">&lt;/label&gt;&lt;br&gt;</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true"></a>        <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;text&quot;</span><span class="ot"> name=</span><span class="st">&quot;libelle&quot;</span><span class="ot"> size=</span><span class="st">&quot;18&quot;</span><span class="ot"> value=</span><span class="st">&quot;{{ type_article.libelle }}&quot;</span><span class="ot"> id=</span><span class="st">&quot;libelle&quot;</span><span class="kw">&gt;&lt;br&gt;</span></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true"></a>        <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;submit&quot;</span><span class="ot"> value=</span><span class="st">&quot;Modifier&quot;</span><span class="ot"> name=</span><span class="st">&quot;Modifier&quot;</span> <span class="kw">&gt;</span></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true"></a>    <span class="kw">&lt;/fieldset&gt;</span></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true"></a>  <span class="kw">&lt;/form&gt;</span></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true"></a>{% endblock %}</span></code></pre></div>
<figure>
<img src="img_flask/ihm_flask_crud_4.png" style="width:27cm" alt="" /><figcaption>modifier les données</figcaption>
</figure>
<h1 id="mettre-en-forme-les-formulaires-le-menu-et-le-tableau">mettre en forme les formulaires le menu et le tableau</h1>
<p>améliorer le style de l’application</p>
<ul>
<li>utiliser le framework boostrap de préférence</li>
</ul>
<br>
<div class="validation">
<p>Valider votre page sur le site <a href="http://validator.w3.org/" target="_blanck">http://validator.w3.org/</a><br />
</p>
</div>
<h1 id="interface-du-crud-sur-la-table-article">interface du CRUD sur la table “article”</h1>
<ul>
<li>ajouter dans le fichier de l’application <strong>app.py</strong> les routes et les fonctions (méthodes) pour charger les vues pour gérer les articles (ajout, modification, suppression et affichage : CRUD)</li>
</ul>
<div class="sourceCode" id="cb22"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true"></a><span class="at">@app.route</span>(<span class="st">&#39;/article/show&#39;</span>)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true"></a><span class="kw">def</span> show_article():</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true"></a>    <span class="co"># print(articles)</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true"></a>    <span class="cf">return</span> render_template(<span class="st">&#39;article/show_article.html&#39;</span>, articles<span class="op">=</span>articles)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true"></a></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true"></a><span class="at">@app.route</span>(<span class="st">&#39;/article/add&#39;</span>, methods<span class="op">=</span>[<span class="st">&#39;GET&#39;</span>])</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true"></a><span class="kw">def</span> add_article():</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true"></a>    <span class="cf">return</span> render_template(<span class="st">&#39;article/add_article.html&#39;</span>, types_articles<span class="op">=</span>types_articles)</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true"></a></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true"></a><span class="at">@app.route</span>(<span class="st">&#39;/article/add&#39;</span>, methods<span class="op">=</span>[<span class="st">&#39;POST&#39;</span>])</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true"></a><span class="kw">def</span> valid_add_article():</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true"></a>    nom <span class="op">=</span> request.form.get(<span class="st">&#39;nom&#39;</span>, <span class="st">&#39;&#39;</span>)</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true"></a>    type_article_id <span class="op">=</span> request.form.get(<span class="st">&#39;type_article_id&#39;</span>, <span class="st">&#39;&#39;</span>)</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true"></a>    prix <span class="op">=</span> request.form.get(<span class="st">&#39;prix&#39;</span>, <span class="st">&#39;&#39;</span>)</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true"></a>    stock <span class="op">=</span> request.form.get(<span class="st">&#39;stock&#39;</span>, <span class="st">&#39;&#39;</span>)</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true"></a>    description <span class="op">=</span> request.form.get(<span class="st">&#39;description&#39;</span>, <span class="st">&#39;&#39;</span>)</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true"></a>    image <span class="op">=</span> request.form.get(<span class="st">&#39;image&#39;</span>, <span class="st">&#39;&#39;</span>)</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true"></a>    <span class="bu">print</span>(<span class="st">u&#39;article ajouté , nom: &#39;</span>, nom, <span class="st">&#39; - type_article_id :&#39;</span>, type_article_id, <span class="st">&#39; - prix:&#39;</span>, prix, <span class="st">&#39; - stock:&#39;</span>, stock, <span class="st">&#39; - description:&#39;</span>, description, <span class="st">&#39; - image:&#39;</span>, image)</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true"></a>    message <span class="op">=</span> <span class="st">u&#39;article ajouté , nom:&#39;</span><span class="op">+</span>nom <span class="op">+</span> <span class="st">&#39;- type_article_id :&#39;</span> <span class="op">+</span> type_article_id <span class="op">+</span> <span class="st">&#39; - prix:&#39;</span> <span class="op">+</span> prix <span class="op">+</span> <span class="st">&#39; - stock:&#39;</span><span class="op">+</span>  stock <span class="op">+</span> <span class="st">&#39; - description:&#39;</span> <span class="op">+</span> description <span class="op">+</span> <span class="st">&#39; - image:&#39;</span> <span class="op">+</span> image</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true"></a>    flash(message, <span class="st">&#39;alert-success&#39;</span>)</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true"></a>    <span class="cf">return</span> redirect(<span class="st">&#39;/article/show&#39;</span>)</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true"></a></span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true"></a><span class="at">@app.route</span>(<span class="st">&#39;/article/delete&#39;</span>, methods<span class="op">=</span>[<span class="st">&#39;GET&#39;</span>])</span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true"></a><span class="kw">def</span> delete_article():</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true"></a>    <span class="bu">id</span> <span class="op">=</span> request.args.get(<span class="st">&#39;id&#39;</span>, <span class="st">&#39;&#39;</span>)</span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true"></a>    message<span class="op">=</span><span class="st">u&#39;un article supprimé, id : &#39;</span> <span class="op">+</span> <span class="bu">id</span></span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true"></a>    flash(message, <span class="st">&#39;alert-warning&#39;</span>)</span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true"></a>    <span class="cf">return</span> redirect(<span class="st">&#39;/article/show&#39;</span>)</span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true"></a></span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true"></a><span class="at">@app.route</span>(<span class="st">&#39;/article/edit&#39;</span>, methods<span class="op">=</span>[<span class="st">&#39;GET&#39;</span>])</span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true"></a><span class="kw">def</span> edit_article():</span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true"></a>    <span class="bu">id</span> <span class="op">=</span> request.args.get(<span class="st">&#39;id&#39;</span>, <span class="st">&#39;&#39;</span>)</span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true"></a>    <span class="bu">id</span><span class="op">=</span><span class="bu">int</span>(<span class="bu">id</span>)</span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true"></a>    article <span class="op">=</span> articles[<span class="bu">id</span><span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true"></a>    <span class="cf">return</span> render_template(<span class="st">&#39;article/edit_article.html&#39;</span>, article<span class="op">=</span>article, types_articles<span class="op">=</span>types_articles)</span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true"></a></span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true"></a><span class="at">@app.route</span>(<span class="st">&#39;/article/edit&#39;</span>, methods<span class="op">=</span>[<span class="st">&#39;POST&#39;</span>])</span>
<span id="cb22-38"><a href="#cb22-38" aria-hidden="true"></a><span class="kw">def</span> valid_edit_article():</span>
<span id="cb22-39"><a href="#cb22-39" aria-hidden="true"></a>    <span class="bu">id</span> <span class="op">=</span> request.form.get(<span class="st">&#39;id&#39;</span>, <span class="st">&#39;&#39;</span>)</span>
<span id="cb22-40"><a href="#cb22-40" aria-hidden="true"></a>    nom <span class="op">=</span> request.form.get(<span class="st">&#39;nom&#39;</span>, <span class="st">&#39;&#39;</span>)</span>
<span id="cb22-41"><a href="#cb22-41" aria-hidden="true"></a>    type_article_id <span class="op">=</span> request.form.get(<span class="st">&#39;type_article_id&#39;</span>)</span>
<span id="cb22-42"><a href="#cb22-42" aria-hidden="true"></a>    prix <span class="op">=</span> request.form.get(<span class="st">&#39;prix&#39;</span>, <span class="st">&#39;&#39;</span>)</span>
<span id="cb22-43"><a href="#cb22-43" aria-hidden="true"></a>    stock <span class="op">=</span> request.form.get(<span class="st">&#39;stock&#39;</span>, <span class="st">&#39;&#39;</span>)</span>
<span id="cb22-44"><a href="#cb22-44" aria-hidden="true"></a>    description <span class="op">=</span> request.form.get(<span class="st">&#39;description&#39;</span>, <span class="st">&#39;&#39;</span>)</span>
<span id="cb22-45"><a href="#cb22-45" aria-hidden="true"></a>    image <span class="op">=</span> request.form.get(<span class="st">&#39;image&#39;</span>, <span class="st">&#39;&#39;</span>)</span>
<span id="cb22-46"><a href="#cb22-46" aria-hidden="true"></a>    <span class="bu">print</span>(<span class="st">u&#39;article modifié , nom : &#39;</span>, nom, <span class="st">&#39; - type_article_id :&#39;</span>, type_article_id, <span class="st">&#39; - prix:&#39;</span>, prix, <span class="st">&#39; - stock:&#39;</span>, stock, <span class="st">&#39; - description:&#39;</span>, description, <span class="st">&#39; - image:&#39;</span>, image)</span>
<span id="cb22-47"><a href="#cb22-47" aria-hidden="true"></a>    message <span class="op">=</span> <span class="st">u&#39;article modifié , nom:&#39;</span><span class="op">+</span>nom <span class="op">+</span> <span class="st">&#39;- type_article_id :&#39;</span> <span class="op">+</span> type_article_id <span class="op">+</span> <span class="st">&#39; - prix:&#39;</span> <span class="op">+</span> prix <span class="op">+</span> <span class="st">&#39; - stock:&#39;</span><span class="op">+</span>  stock <span class="op">+</span> <span class="st">&#39; - description:&#39;</span> <span class="op">+</span> description <span class="op">+</span> <span class="st">&#39; - image:&#39;</span> <span class="op">+</span> image</span>
<span id="cb22-48"><a href="#cb22-48" aria-hidden="true"></a>    flash(message, <span class="st">&#39;alert-success&#39;</span>)</span>
<span id="cb22-49"><a href="#cb22-49" aria-hidden="true"></a>    <span class="cf">return</span> redirect(<span class="st">&#39;/article/show&#39;</span>)</span></code></pre></div>
<ul>
<li>réaliser les interfaces pour afficher, ajouter, modifier, supprimer des articles</li>
</ul>
<h2 id="amélioration-la-liste-déroulante">amélioration : la liste déroulante</h2>
<p>voici un exemple possible de code pour réaliser une liste déroulante à partir d’un tableau de données</p>
<p><br></p>
<ul>
<li>ajouter</li>
</ul>
<pre><code>&lt;select name=&quot;type_article_id&quot; required&gt;
    &lt;option value=&quot;&quot;&gt;Sélectionner un type d&#39;article&lt;/option&gt;
    {% for type in types_articles %}
         &lt;option value=&quot;{{ type.id }}&quot;&gt; {{ type.libelle }} &lt;/option&gt;
    {% endfor %}
&lt;/select&gt;</code></pre>
<ul>
<li>modifier</li>
</ul>
<pre><code>&lt;select name=&quot;type_article_id&quot; required&gt;
    {% for type in types_articles %}
    &lt;option value=&quot;{{ type.id }}&quot;
            {% if article.type_article_id is defined and type.id ==  article.type_article_id %}selected{% endif %}
    &gt; {{ type.libelle }} &lt;/option&gt;
    {% endfor %}
&lt;/select&gt;</code></pre>
<h2 id="amélioration-afficher-une-image">amélioration : afficher une image</h2>
<p>Les images sont dans le dossier static</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true"></a><span class="kw">&lt;img</span><span class="ot"> style=</span><span class="st">&quot;width:40px;height:40px&quot;</span><span class="ot"> src=</span><span class="st">&quot;/static/images/{{ ligne.image }}&quot;</span><span class="ot"> alt=</span><span class="st">&quot;image  de {{ ligne.nom }}&quot;</span><span class="kw">&gt;</span></span></code></pre></div>
<p>Afficher une image seulement si le nom existe</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true"></a>{%  if ligne.image is not none %}</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true"></a>    <span class="kw">&lt;img</span><span class="ot"> style=</span><span class="st">&quot;width:40px;height:40px&quot;</span><span class="ot">  src=</span><span class="st">&quot;{{ url_for(&#39;static&#39;, filename = &#39;images/&#39; + ligne[&#39;image&#39;]) }}&quot;</span><span class="ot">  alt=</span><span class="st">&quot;image  de {{ ligne.nom }}&quot;</span> <span class="kw">&gt;</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true"></a>{% else %}</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true"></a>    <span class="kw">&lt;img</span><span class="ot"> style=</span><span class="st">&quot;width:40px;height:40px&quot;</span><span class="ot">   src=</span><span class="st">&quot;{{ url_for(&#39;static&#39;, filename=&#39;images/no_photo.jpeg&#39;)}}&quot;</span><span class="ot">  alt=</span><span class="st">&quot;no image&quot;</span> <span class="kw">&gt;</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true"></a>{% endif %} </span></code></pre></div>
<h1 id="annexes-ressources">annexes ressources</h1>
<p><br></p>
<p>Pour aller plus loin, voici quelques exercices avec <a href="http://iamjmm.ovh/NSI/http_bottle_form/site/formulaires.html" target="_blank">bootle</a></p>
<p><br></p>
<ul>
<li><p><a href="https://pixees.fr/informatiquelycee/n_site/nsi_prem_flask.html" target="_blank">flask en NSI</a></p></li>
<li><p><a href="https://perso.liris.cnrs.fr/pierre-antoine.champin/2017/progweb-python/cours/cm2.html" target="_blank">flask</a></p></li>
</ul>
<p><br></p>
<ul>
<li><a href="http://sdz.tdct.org/sdz/creez-vos-applications-web-avec-flask.html" target="_blank">flask sur le sdz</a></li>
</ul>
<p><br></p>
<p><a href="https://openclassrooms.com/fr/courses/4425066-concevez-un-site-avec-flask/4526123-decoupez-votre-projet-en-templates" target="_blank">openclassroom</a></p>
<p><br></p>
<!-- exemple de cours : 

[cours ENIB](https://www.enib.fr/~choqueuse/articles/flask/introduction-au-moteur-de-template-jinja-2.html){target=_blank} -->
<!-- https://developer.mozilla.org/fr/docs/Learn/Server-side/First_steps/Website_security
https://developer.mozilla.org/fr/docs/Learn/Forms/Sending_and_retrieving_form_data#exemple_python -->
<!--
    formulaire
    https://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-iii-web-forms
    https://blog.ruanbekker.com/blog/2018/05/27/web-forms-with-python-flask-and-the-wtforms-module-with-bootstrap/

https://courses.miguelgrinberg.com/p/flask-mega-tutorial
-->
<script>
function myFunction() {
  var x = document.getElementById("myDIV");
  if (x.style.display === "none") {
    x.style.display = "block";
  } else {
    x.style.display = "none";
  }
}
</script>
</body>
</html>
