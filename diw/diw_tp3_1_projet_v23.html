<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>DIW</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <link rel="stylesheet" href="markdown-pandoc-amV4.css" />
  <link rel="icon" href="favicon.ico" />
</head>
<body>
<h1 id="mini-projet">mini projet</h1>
<p>Il faut terminer la version minimum du tp précédent avant de commencer le projet</p>
<h2 id="consignes-pour-réaliser-toutes-les-interfaces-pour-ajoutermodifiersupprimer-et-afficher-les-données-des-2-tableaux-python-de-votre-sujet">Consignes pour Réaliser toutes les interfaces pour ajouter/modifier/supprimer et afficher les données des 2 tableaux python de votre sujet</h2>
<p><br></p>
<p><strong>Faire les mêmes interfaces que lors des tps précédents mais en utilisant les 2 tableaux de données de votre sujet</strong></p>
<br>
<div class="important" style="font-size: 150%;">
<p><strong>Le projet est à rendre sur <a href="https://moodle.univ-fcomte.fr/mod/assign/view.php?id=624803">moodle (utiliser le lien suivant), clé d’inscription: R105</a></strong> pour le <span style="color:red"><strong>samedi 4 novembre</strong></span></p>
</div>
<p><br></p>
<p><strong>Soigner l’ergonomie des interfaces</strong> <br></p>
<p><strong>Faire attention que les contenus des pages affichées soient valides sur W3C</strong></p>
<p><br><br></p>
<p>Respecter les consignes suivantes (surtout <a href="https://espritweb.fr/le-snake-case-ca-te-parle/" target="_blank">typographique</a>) :</p>
<ul>
<li><p>les <strong>noms des fonctions</strong> (méthodes) dans l’application doivent porter le nom de la table (utilise du <a href="https://fr.wikipedia.org/wiki/Snake_case" target="_blank">snake_case</a>)</p></li>
<li><p>les <strong>routes</strong> doivent porter le nom de la table puis le nom de l’opération ( en kebab-case ou <a href="https://blog.octo.com/designer-une-api-rest/#case" target="_blank">spinal case</a>) : <code>/table/show</code> <code>/table/edit</code> <code>/table/add</code> …</p></li>
<li><p>créer dans le dossier <strong>template</strong> un dossier de vue qui porte le nom de la table (utilise du snake_case)</p></li>
<li><p>mettre aux <strong>fichiers des vues</strong> des noms de la forme (<code>add_table.html</code> <code>edit_table.html</code> <code>show_table.html</code>)</p></li>
<li><p>les noms <strong>des champs input(name)</strong> doivent porter le nom des clés (attribut) des dictionnaires que vous utilisez</p>
<ul>
<li>ATTENTION : les clés dans tous les tableaux python de dictionnaires sont en <a href="https://fr.wikipedia.org/wiki/Camel_case" target="_blank">CamelCase</a>, il faut respecter cette notation.</li>
</ul></li>
<li><p>le contenu des dictionnaires n’est pas modifié</p></li>
<li><p><span class="modif">toutes les valeurs du formulaire des champs INPUT doivent être affichées dans le messages “flash” lors de la soumission du formulaire</span></p></li>
</ul>
<p><br></p>
<div class="important">
<p>Remplacer <strong>table</strong> par les 2 noms des tables de votre sujet</strong></p>
<p><br> Volontairement, il n’y a pas de “design”, cependant voici une démonstration des fonctionnalités du travail attendu <a href="http://amillet1.pythonanywhere.com/" target="_blanck">http://amillet1.pythonanywhere.com/</a></p>
<p><strong>ATTENTION</strong> : on ne doit pas retrouver le mot <strong>article</strong> dans votre code</p>
<p>L’affichage des 2 tableaux “python” doit être <strong>sous forme de tableaux</strong> pour afficher/ajouter/supprimer/modifier (CRUD back-office)<br />
<br> <strong>Les 2 tableaux python ne sont jamais modifiés</strong><br />
Les noms des champs INPUT dans les formulaires doivent porter le nom des clés des tableaux python<br />
</p>
<p>Lors de la modification d’un enregistrement, afficher le contenu de l’enregistrement (la ligne sélectionnée) dans les champs INPUT du formulaire.</p>
</div>
<p><br></p>
<h2 id="étapes-et-exemples-de-vues"><strong>Étapes et exemples de vues</strong></h2>
<ul>
<li>Faire un menu avec vos styles</li>
</ul>
<p><img src="img_flask/S1_diw_projet2.png" style="width:10cm" /></p>
<ul>
<li>afficher le contenu des 2 dictionnaires (tables) avec les 2 routes <code>/table/show</code> et <code>table2/show</code></li>
</ul>
<p><img src="img_flask/S1_diw_projet4.png" style="width:15cm" /></p>
<p><img src="img_flask/S1_diw_projet6.png" style="width:10cm" /></p>
<ul>
<li><p>créer 2 formulaires (un pour ajouter un enregistrement sur la route <code>/table/add</code> et un pour pour modifier un enregistrement sur la route <code>/table/edit</code>) pour chaque table</p></li>
<li><p>attention : les noms des champs input(name) doivent porter le nom des clés (attribut) des dictionnaires</p></li>
<li><p>ergonomie : imposer de sélectionner une valeur dans la liste déroulante, imposer de saisir un contenu dans au moins 2 des principaux champs (attributs) du dictionnaire</p></li>
<li><p>utiliser pour valider le formulaire la méthode POST et une route (attribut “action” du formulaire) de nom <code>/table/add</code> ou <code>/table/edit</code> selon l’opération</p></li>
</ul>
<p><img src="img_flask/S1_diw_projet7.png" style="width:13cm" /></p>
<ul>
<li>après une opération comme “ajouter”, “modifier” ou “supprimer”, afficher un message dit “flash” avec les informations du formulaire lors d’une création, d’une modification ou d’une suppression d’un article</li>
</ul>
<figure>
<img src="img_flask/S1_diw_projet8.png" style="width:15cm" alt="" /><figcaption>exemple</figcaption>
</figure>
<h2 id="interfaces-supplémentaires">Interfaces supplémentaires</h2>
<p>afficher les 2 contenus des 2 tables dans la même vue</p>
<ul>
<li><p>Formulaire :</p>
<ul>
<li>afficher les éléments de la seconde table (la plus petite) sous forme de “toggle” (cases à cocher),</li>
<li>afficher des champs INPUT pour filtrer un numérique de la table (la plus grosse) de votre sujet ainsi qu’un champ texte pour saisir une chaîne de texte.</li>
<li>si on valide le formulaire, afficher des messsages “flash” avec les cases “cochées” (id de la petite table) et le contenu des champs INPUT si ils sont corrects sinon afficher un message d’erreur</li>
</ul></li>
<li><p>afficher les éléments de la première table sous forme de <a href="https://getbootstrap.com/docs/5.0/components/card/" target="_blank">cards</a></p></li>
<li><p>Le filtre n’est pas fonctionnel. Seul l’affichage du contenu des 2 tableaux (python) est à réaliser, ainsi que l’affichage du contenu du formulaire dans des messages “flash”. Tester sur <a href="http://amillet1.pythonanywhere.com/article/filtre" class="uri">http://amillet1.pythonanywhere.com/article/filtre</a></p></li>
</ul>
<figure>
<img src="img_flask/ihm_flask_projet_1.png" style="width:18cm" alt="" /><figcaption>exemple avec les articles</figcaption>
</figure>
<p><br> Exemple de code pour afficher le contenu du filtre</p>
<figure>
<img src="img_flask/ihm_flask_projet_1_2.png" style="width:18cm" alt="" /><figcaption>exemple de code pour afficher les éléments du formulaire filtre si on valide le formulaire</figcaption>
</figure>
<p>Pour comparer des réels c’est un peu plus compliqué</p>
<figure>
<img src="img_flask/ihm_flask_projet_1_3.png" style="width:14cm" alt="" /><figcaption>modification à ajouter pour tester des réels</figcaption>
</figure>
<p><br></p>
<h1 id="annexe">ANNEXE</h1>
<p><span class="modif">script de test du projet :</span> <br></p>
<p><span class="modif">Un premier script extrait les archives <code>.tar.gz</code> et <code>.zip</code>, ce script recherche un dossier et copie un autre script <code>test_projet.sh</code> dans le dossier, le script se trouve au même niveau que le fichier app.py (une erreur est signalée dans le cas contraire).</span></p>
<p><br></p>
<p>script de test :</p>
<pre><code>#!/bin/bash
clear
echo -e &quot;\033[0;32m \n**** listes des fichiers :&quot;
ls templates/*

echo -e &quot;\033[0;31m \n*****.sql \033[0m&quot;
grep &quot;@app.route&quot;  app.py

echo -e &quot;\033[0;32m \n**** listes des paramètres (clés des tableaux associatifs) :&quot;
grep &quot;request.form.get&quot;  app.py | uniq -c
echo -e &quot; \033[0m&quot;

code  app.py &amp;

killall python3
flask --debug  --app app  run   --host 0.0.0.0</code></pre>
<script>
function myFunction() {
  var x = document.getElementById("myDIV");
  if (x.style.display === "none") {
    x.style.display = "block";
  } else {
    x.style.display = "none";
  }
}
</script>
</body>
</html>
