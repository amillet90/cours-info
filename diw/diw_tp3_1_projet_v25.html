<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>DIW</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <link rel="stylesheet" href="markdown-pandoc-amV4.css" />
  <link rel="icon" href="favicon.ico" />
</head>
<body>
<h1 id="mini-projet">mini projet</h1>
<p>Il faut terminer la version minimum du TP précédent avant de
commencer le projet</p>
<p><br></p>
<div class="important" style="font-size: 150%;">
<p><strong>Voici une démonstration des fonctionnalités attendues pour le
travail à réaliser <a href="http://amillet1.pythonanywhere.com/"
target="_blanck">http://amillet1.pythonanywhere.com/</a></strong><br></p>
</div>
<h2
id="consignes-pour-réaliser-toutes-les-interfaces-pour-ajoutermodifiersupprimer-et-afficher-les-données-des-2-tableaux-python-de-votre-sujet">Consignes
pour Réaliser toutes les interfaces pour ajouter/modifier/supprimer et
afficher les données des 2 tableaux Python de votre sujet</h2>
<p><br></p>
<p><strong>Faire les mêmes interfaces que lors des TPs précédents mais
en utilisant les dux tableaux de données de votre sujet</strong></p>
<br>
<div class="important" style="font-size: 150%;">
<p><strong>Le projet est à rendre sur <a
href="https://moodle.univ-fcomte.fr/mod/assign/view.php?id=781193">moodle
(utiliser le lien suivant), clé d’inscription: R105</a></strong> pour le
<span style="color:red"><strong>samedi 1 novembre</strong></span></p>
</div>
<p><br></p>
<p><strong>Soigner l’ergonomie des interfaces</strong> <br></p>
<p><strong>Faire attention que les contenus des pages affichées soient
valides sur W3C</strong></p>
<p><br><br></p>
<p>Respecter les consignes suivantes (surtout <a
href="https://espritweb.fr/le-snake-case-ca-te-parle/"
target="_blank">typographique</a>) :</p>
<ul>
<li><p>les <strong>noms des fonctions</strong> (méthodes) dans
l’application doivent porter le nom de l’opération puis le nom de la
table ; utiliser du <a href="https://fr.wikipedia.org/wiki/Snake_case"
target="_blank">snake_case</a> : show_nom_table add_nom_table
valid_add_nom_table delete_nom_table edit_nom_table valid_edit_nom_table
…</p></li>
<li><p>les <strong>routes</strong> doivent porter le nom de la table
puis le nom de l’opération ( en kebab-case (appellé aussi <a
href="https://blog.octo.com/designer-une-api-rest/#case"
target="_blank">spinal case</a>)) : <code>/nom-table/show</code>
<code>/nom-table/edit</code> <code>/nom-table/add</code> …</p></li>
<li><p>créer dans le dossier <strong>templates</strong> un dossier de
vue qui porte le nom de la table (utiliser du
<strong>snake_case</strong>) : les noms sont indiqués dans chaque
sujet</p></li>
<li><p>mettre aux <strong>fichiers des vues</strong> des noms de la
forme (<code>add_table.html</code> <code>edit_table.html</code>
<code>show_table.html</code>)</p></li>
<li><p>les noms <strong>des champs input(name)</strong> doivent porter
le nom des clés (attribut) des dictionnaires que vous utilisez</p>
<ul>
<li>ATTENTION : les clés dans tous les tableaux Python de dictionnaires
sont en <a href="https://fr.wikipedia.org/wiki/Camel_case"
target="_blank">CamelCase</a>, il faut respecter cette notation.</li>
<li>La seule clé en snake_case est la clé étrangère</li>
</ul></li>
<li><p>Le contenu des dictionnaires n’est pas modifié (pénalité
importante dans le cas contraire).</p></li>
<li><p>Toutes les valeurs du formulaire des champs INPUT doivent être
affichées dans le messages “flash” lors de la soumission du
formulaire.</p></li>
<li><p>Utilisez uniquement les fonctions
<code>request, render_template, redirect, flash</code> de l’objet
<code>Flask</code> dans le fichier <code>app.py</code></p></li>
<li><p>Il faut utiliser le framework CSS Bootstrap en local (dans le
dossier <code>static</code>) et non avec des CDN</p></li>
</ul>
<p><br></p>
<div class="important">
<p>Remplacer <strong>table</strong> par les 2 noms des tables de votre
sujet</strong></p>
<p><strong>ATTENTION</strong> : on ne doit pas retrouver le mot
<strong>article</strong> dans votre code</p>
<p>L’affichage des 2 tableaux “Python” doit être <strong>sous forme de
tableaux</strong> pour afficher/ajouter/supprimer/modifier (CRUD
back-office)<br />
<br> <strong>Les 2 tableaux sources en Python ne sont jamais
modifiés</strong><br />
</p>
<p>Les noms des champs INPUT dans les formulaires doivent porter le nom
des clés des tableaux python<br />
</p>
<p>Lors de la modification d’un enregistrement, afficher le contenu de
l’enregistrement (la ligne sélectionnée) dans les champs INPUT du
formulaire.</p>
<p><br></p>
</div>
<div class="important">
<p>ATTENTION : utiliser le code vu en cours, l’utilisation d’une IA
générative pour produire un code non conforme au TP vu en cours
entraînera une grosse pénalité.</p>
<p>Une pénalité importante sera appliquée si les règles suivantes ne
sont pas respectées :</p>
<ul>
<li>Pas de boucle Python dans le fichier <em>app.py</em> (par exemple
avec le mot-clé <code>next</code> ou <code>for</code>).</li>
<li>Pas d’utilisation des mots-clés <code>with</code> et
<code>try</code> en Python (gestion des exceptions).</li>
<li>Pas d’utilisation de la fonction <code>url_for</code> pour gérer une
route.</li>
<li>Pas d’utilisation de route paramétrée <code>/route/&lt;id&gt;</code>
à la place des routes avec paramètres GET <code>/route?id=</code>
(paramètres de requête).</li>
<li>Pas d’utilisation de JavaScript.</li>
<li>Pas d’utilisation de module Python non vu en TP.</li>
<li><strong>Pas d’utilisation de code que vous ne maîtrisez
pas</strong></li>
</ul>
<p><br></p>
<ul>
<li>Ne pas utiliser l’attribut “required” dans tous les champs INPUT.
Utilisez le uniquement pour les clés étrangères et le champ “nom”(ou
libellé) de l’enregistrement le plus important qui permet d’identifier
l’enregistrement.</li>
<li>Ne pas utiliser “request.method” dans le fichier app.py.</li>
<li>Ne pas utiliser de condition “SI” (“IF”) dans le fichier
app.py.</li>
</ul>
</div>
<p><br></p>
<h2
id="étapes-et-exemples-de-vues-consignes-css-et-bootstrap"><strong>Étapes
et exemples de vues</strong> (consignes CSS et BootStrap)</h2>
<ul>
<li><p>ajouter un “favicon” pour toutes les pages (layout)</p></li>
<li><p>corps des pages :</p>
<ul>
<li>utiliser un “container” pour définir les marges de chaque page</li>
</ul></li>
</ul>
<h4 id="menu">Menu</h4>
<ul>
<li>Faire un menu identique à celui ci-dessous</li>
</ul>
<p><img src="mini_projet/S1_diw_projet_menu_v2_n.png"
style="width:20cm" /></p>
<ul>
<li>utiliser <strong>Bootstrap</strong> pour créer le
<strong>menu</strong></li>
<li>c’est le même menu pour toutes les routes (URL) : c’est le même menu
dans toutes les pages</li>
<li>le menu doit être un menu Bootstrap standard avec 3 boutons : de
gauche à droite le menu est composé :
<ul>
<li>une icône qui est un lien qui redirige sur la page d’accueil
(layout)</li>
<li>le numéro du sujet</li>
<li>un bouton pour ajouter/modifier supprimer le contenu de la table
(tableau) la plus grosse de votre sujet</li>
<li>un bouton pour ajouter/modifier supprimer le contenu de la table
(tableau) la plus petite de votre sujet</li>
<li>un bouton pour accéder à l’interface supplémentaire (l’interface du
filtre)</li>
</ul></li>
</ul>
<h4 id="affichage-des-deux-tableaux-de-dictionnaires">affichage des deux
tableaux de dictionnaires</h4>
<ul>
<li>afficher le contenu des 2 dictionnaires (tables) avec les 2 routes
<code>/table/show</code> et <code>table2/show</code></li>
</ul>
<p><img src="mini_projet/S1_diw_projet_tableau_v2_n.png"
style="width:20cm" /></p>
<ul>
<li><strong>affichage de la grosse table</strong> :
<ul>
<li>utiliser un tableau Bootstrap,</li>
<li>utiliser une classe pour mettre en rouge l’identifiant qui fait
référence à l’identifiant de l’autre table (cette valeur est un
numérique).</li>
</ul></li>
</ul>
<!-- ![](img_flask/S1_diw_projet6.png){width=10cm} -->
<h4 id="formulaires">formulaires</h4>
<ul>
<li>créer 2 formulaires (un pour ajouter un enregistrement sur la route
<code>/table/add</code> et un pour modifier un enregistrement sur la
route <code>/table/edit</code>). Créer ces 2 formulaires pour chacune
des 2 tables.</li>
<li><strong>attention : les noms des champs INPUT (attribut NAME)
doivent porter le nom des clés (attribut) des
dictionnaires</strong></li>
</ul>
<p><br> Consignes CSS (styles) :</p>
<ul>
<li>les formulaires doivent respecter les consignes suivantes :
<ul>
<li>utiliser les classes Bootstrap,</li>
<li>mettre l’arrière-plan de la liste déroulante de couleur “jaune”</li>
<li>Définir <strong>uniquement</strong> le champ INPUT principal et la
liste déroulante comme <strong>requis</strong> dans le formulaire de la
grosse table</li>
<li>Définir <strong>uniquement</strong> le champ INPUT principal comme
<strong>requis</strong> dans le formulaire de la petite table</li>
<li>Définir le champ INPUT avec une date de type “date”</li>
<li>Définir le champ INPUT avec des numériques de type numérique
(“number”)</li>
<li>Définir le champ INPUT pour l’image avec un INPUT type texte (éviter
d’utiliser “file”)</li>
<li>laisser une marge à gauche et à droite pour chaque formulaire</li>
</ul></li>
<li>dans le formulaire
<ul>
<li><strong>les champs requis invalides ont un arrière plan
gris</strong></li>
<li><strong>les listes déroulantes ont un arrière plan
jaune</strong></li>
</ul></li>
<li>ergonomie :
<ul>
<li>imposer de sélectionner une valeur dans la liste déroulante,</li>
<li>imposer de saisir un contenu du champ principal (attribut) du
dictionnaire (c’est le premier mot après <code>Filtre : texte</code>
dans votre sujet )</li>
</ul></li>
<li>utiliser une route et une variable (identifiant passé en méthode
GET) pour effectuer une opération (ajouter/modifier/supprimer) sur une
ligne du tableau (sinon pénalité, pas de route du type
<code>/table/add/&lt;id&gt;</code> souvent proposée par les IA
génératives)</li>
<li>utiliser la méthode POST pour valider un formulaire et une route
(attribut “action” du formulaire) de nom <code>/table/add</code> ou
<code>/table/edit</code> selon l’opération</li>
</ul>
<p><img src="mini_projet/S1_diw_projet_formulaire_v2.png"
style="width:20cm" /></p>
<!-- ![](img_flask/S1_diw_projet7.png){width=13cm} -->
<h4 id="messages-flash">messages “flash”</h4>
<ul>
<li>après une opération comme “ajouter”, “modifier” ou “supprimer”,
afficher un message dit “flash” avec les informations du formulaire lors
d’une création, d’une modification ou d’une suppression d’un
article</li>
<li>afficher dans l’ordre : l’opération effectuée, le nom principal de
la table, l’identifiant de la clé étrangère (qui fait référence à
l’identifiant de l’autre table (clé primaire)), les autres valeurs des
champs (INPUT) et en dernier si l’opération est ‘modifier’ ou
‘supprimer’ l’identifiant de la ligne (dictionnaire du tableau)</li>
</ul>
<figure>
<img src="mini_projet/S1_diw_projet_message_v2_n.png" style="width:20cm"
alt="exemple" />
<figcaption aria-hidden="true">exemple</figcaption>
</figure>
<h2 id="interfaces-supplémentaires-interface-dun-filtre">Interfaces
supplémentaires (interface d’un filtre)</h2>
<ul>
<li>l’interface supplémentaire (interface pour le filtre) doit utiliser
la classe “cards” de Bootstrap et le plus possible les classes Bootstrap
( pour les formulaires etc ….)</li>
</ul>
<p><br></p>
<ul>
<li>Afficher les 2 contenus des 2 tables dans la même vue :
<ul>
<li>afficher la seconde table dans le formulaire (cases à cocher)</li>
<li>afficher les éléments de la première table sous forme de <a
href="https://getbootstrap.com/docs/5.0/components/card/"
target="_blank">card</a> sur 3 colonnes (3 “cards” par ligne)</li>
</ul></li>
</ul>
<h4 id="formulaire">Formulaire :</h4>
<ul>
<li>afficher les éléments de la seconde table (la plus petite) sous
forme de “toggle” (cases à cocher),</li>
<li>afficher des champs INPUT pour filtrer un numérique de la table (la
plus grosse) de votre sujet ainsi qu’un champ texte pour saisir une
chaîne de texte.</li>
<li>si on valide le formulaire, afficher des messages “flash” avec les
cases “cochées” (id de la petite table) et le contenu des champs INPUT
si ils sont corrects sinon afficher un message d’erreur</li>
</ul>
<h4 id="fonctionnement-du-filtre">fonctionnement du filtre</h4>
<ul>
<li>Le filtre n’est pas fonctionnel. Seul l’affichage du contenu des 2
tableaux (python) est à réaliser, ainsi que l’affichage du contenu du
formulaire dans des messages “flash”. Tester sur <a
href="http://amillet1.pythonanywhere.com/article/filtre"
class="uri">http://amillet1.pythonanywhere.com/article/filtre</a></li>
</ul>
<figure>
<img src="mini_projet/S1_diw_projet_filtre.png" style="width:20cm"
alt="exemple avec les articles" />
<figcaption aria-hidden="true">exemple avec les articles</figcaption>
</figure>
<!-- ![exemple avec les articles](img_flask/ihm_flask_projet_1.png){width=18cm} -->
<p><br> Exemple de code pour afficher le contenu du filtre</p>
<figure>
<img src="img_flask/ihm_flask_projet_1_2.png" style="width:18cm"
alt="exemple de code pour afficher les éléments du formulaire filtre si on valide le formulaire" />
<figcaption aria-hidden="true">exemple de code pour afficher les
éléments du formulaire filtre si on valide le formulaire</figcaption>
</figure>
<p>Pour comparer des réels c’est un peu plus compliqué</p>
<figure>
<img src="img_flask/ihm_flask_projet_1_3.png" style="width:14cm"
alt="modification à ajouter pour tester des réels (il faut adapter ce code)" />
<figcaption aria-hidden="true">modification à ajouter pour tester des
réels (il faut adapter ce code)</figcaption>
</figure>
<p><br></p>
<h1 id="barème-dévaluation">Barème d’évaluation</h1>
<p><img src="img_flask/ihm_flask_projet_bareme_1.png"
style="width:15cm" /></p>
<h1 id="annexe">ANNEXE</h1>
<p><span class="modif">script de test du projet :</span> <br></p>
<p><span class="modif">Un premier script extrait les archives
<code>.tar.gz</code> et <code>.zip</code>, ce script recherche un
dossier et copie un autre script <code>test_projet.sh</code> dans le
dossier. Le script <code>test_projet.sh</code> se trouve au même niveau
que le fichier app.py (une erreur est signalée dans le cas
contraire).</span></p>
<p><br></p>
<p>script de test :</p>
<pre><code>#!/bin/bash
clear

echo -e &quot;\033[0;32m \n**** listes des fonctions(snake_case: show_nom_table add_nom_table valid_add_nom_table delete_nom_table edit_nom_table valid_edit_nom_table) :&quot;
grep &quot;def &quot;  app.py | uniq -c

echo -e &quot;\033[0;32m \n**** listes des fichiers (snake_case: add_table.html edit_table.html show_table.html)  : &quot;
ls templates/*

echo -e &quot;\033[0;31m \n***** listes des routes (spinal case : /nom-table/show /nom-table/edit /nom-table/add ) \033[0m&quot;
grep &quot;@app.route&quot;  app.py

echo -e &quot;\033[0;32m \n**** listes des paramètres POST (CamelCase : clés des dictionnaires, sauf la clé étrangére) :&quot;
grep &quot;request.form.get&quot;  app.py | uniq -c

echo -e &quot; \033[0m&quot;

code  app.py &amp;

killall python3
flask --debug  --app app  run   --host 0.0.0.0
</code></pre>
<!--
```
#!/bin/bash
clear
echo -e "\033[0;32m \n**** listes des fichiers :"
ls templates/*

echo -e "\033[0;31m \n***** liste des routes : \033[0m"
grep "@app.route"  app.py

echo -e "\033[0;32m \n**** listes des paramètres (clés des tableaux associatifs) :"
grep "request.form.get"  app.py | uniq -c
echo -e " \033[0m"

code  app.py &

killall python3
flask --debug  --app app  run   --host 0.0.0.0
```
-->
</body>
</html>
